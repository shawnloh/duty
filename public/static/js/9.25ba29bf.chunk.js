(this.webpackJsonpfrontend_duty=this.webpackJsonpfrontend_duty||[]).push([[9],{343:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(16),m=a.n(i),u=a(6),d={tag:u.n,className:o.a.string,cssModule:o.a.object},p=function(e){var t=e.className,a=e.cssModule,r=e.tag,c=Object(l.a)(e,["className","cssModule","tag"]),o=Object(u.j)(m()(t,"card-title"),a);return s.a.createElement(r,Object(n.a)({},c,{className:o}))};p.propTypes=d,p.defaultProps={tag:"div"},t.a=p},345:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(16),m=a.n(i),u=a(6),d={tag:u.n,className:o.a.string,cssModule:o.a.object},p=function(e){var t=e.className,a=e.cssModule,r=e.tag,c=Object(l.a)(e,["className","cssModule","tag"]),o=Object(u.j)(m()(t,"card-text"),a);return s.a.createElement(r,Object(n.a)({},c,{className:o}))};p.propTypes=d,p.defaultProps={tag:"p"},t.a=p},363:function(e,t,a){"use strict";a.r(t);var n=a(21),l=a(22),r=a(50),s=a(49),c=a(51),o=a(1),i=a.n(o),m=a(54),u=a(273),d=a(274),p=a(276),E=a(132),g=a(337),h=a(338),v=a(283),f=a(44),b=a(42),y=a(351),k=function(e){var t=e.events,a=e.path;return 0===t.length?i.a.createElement(d.a,{className:"my-2 mx-2"},"No events available"):i.a.createElement(y.a,{striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Name"),i.a.createElement("th",{className:"text-center"},"Date"),i.a.createElement("th",{className:"text-center"},"Point System"),i.a.createElement("th",{className:"text-center"},"Actions"))),i.a.createElement("tbody",null,t.map((function(e){return i.a.createElement("tr",{key:e._id},i.a.createElement("td",{className:"text-center"},e.name),i.a.createElement("td",{className:"text-center"},e.date),i.a.createElement("td",{className:"text-center"},e.pointSystem.name),i.a.createElement("td",{className:"text-center"},i.a.createElement(d.a,null,i.a.createElement(E.a,{tag:b.b,to:"".concat(a,"/").concat(e._id),color:"primary"},"View")),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(E.a,{color:"danger",tag:b.b,to:"".concat(a,"/").concat(e._id,"/delete")},"Delete"))))}))))},N=a(356),S=a(357),x=a(358),P=function(e){var t=e.rowsPerPage,a=e.totalPosts,n=e.currentPage,l=e.setPage,r=Object(o.useMemo)((function(){for(var e=[],n=1;n<=Math.ceil(a/t);n+=1)e.push(n);return e}),[a,t]);return 0===r.length?null:i.a.createElement(N.a,{"aria-label":"Events Pagination"},i.a.createElement(S.a,{disabled:1===n},i.a.createElement(x.a,{first:!0,onClick:function(){return l(1)}})),i.a.createElement(S.a,{disabled:1===n},i.a.createElement(x.a,{previous:!0,onClick:function(){return l(n-1)}})),r.map((function(e){return i.a.createElement(S.a,{active:n===e,key:e},i.a.createElement(x.a,{onClick:function(){return l(e)}},e))})),i.a.createElement(S.a,{disabled:n===r[r.length-1]},i.a.createElement(x.a,{next:!0,onClick:function(){return l(n+1)}})),i.a.createElement(S.a,{disabled:n===r[r.length-1]},i.a.createElement(x.a,{last:!0,onClick:function(){return l(r[r.length-1])}})))},j=a(98),A=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).getEvents=function(){var e=a.props,t=e.ids,n=e.events,l=a.state,r=l.rowsPerPage,s=l.page,c=l.filterBy,o=s*r,i=o-r;if("ALL"===c)return{shownEvents:t.slice(i,o).map((function(e){return n[e]})),ids:t};var m=t.filter((function(e){return n[e].pointSystem.name===c}));return{shownEvents:m.slice(i,o).map((function(e){return n[e]})),ids:m}},a.setPage=function(e){a.setState({page:e})},a.filter=function(e){a.setState({filterBy:e.target.value})},a.state={rowsPerPage:10,page:1,filterBy:"ALL"},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pointIds,a=e.points,n=e.match.path,l=this.state,r=l.rowsPerPage,s=l.page,c=this.getEvents(),o=c.shownEvents,m=c.ids;return i.a.createElement(j.a,null,i.a.createElement(v.Helmet,null,i.a.createElement("title",null,"Events")),i.a.createElement(u.a,null,i.a.createElement(d.a,{className:"my-2 d-flex justify-content-center align-items-center"},i.a.createElement(p.a,{xs:"9"},i.a.createElement("h1",null,"Events")),i.a.createElement(p.a,{xs:"3",className:"d-flex justify-content-end"},i.a.createElement(E.a,{color:"success",size:"md",tag:b.b,to:"".concat(n,"/add")},"Add"))),i.a.createElement(d.a,null,i.a.createElement(p.a,{xs:"12"},i.a.createElement("p",{className:"text-danger"},"Note: Past events that have expired will automatically be removed, points will be retained."))),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,{xs:"12"},i.a.createElement(g.a,{for:"filterSelect"},"Filter"),i.a.createElement(h.a,{type:"select",name:"filterSelect",id:"filterSelect",onChange:this.filter},i.a.createElement("option",{value:"ALL"},"ALL"),t.map((function(e){return i.a.createElement("option",{key:e,value:a[e].name},a[e].name)}))))),i.a.createElement(d.a,null,i.a.createElement(k,{events:o,path:n})),i.a.createElement(d.a,{className:"justify-content-center align-items-center"},i.a.createElement(P,{rowsPerPage:r,currentPage:s,setPage:this.setPage,totalPosts:m.length}))))}}]),t}(o.PureComponent),w=Object(f.b)((function(e){return{ids:e.events.get("ids"),events:e.events.get("events"),pointIds:e.points.get("ids"),points:e.points.get("points")}}))(A),O=a(355),D=a(359),C=a(360),M=a(64),I=a.n(M),Y=a(349),V=a(336),q=a(350),F=a(361),B=a(275),R=a(288),_=a(292),L=a(3),z=a.n(L),Q=a(99),T=a(371),G=a(352),H=a(353),U=a(354),W=a(296),J=a.n(W),K=a(58),X=function(e){var t={};return 0===e.pioneers&&0===e.wspecs&&(t.pioneers="Must contained at least 1 in pioneers or specs",t.wspecs="Must contained at least 1 in pioneers or specs"),t},Z=_.c().shape({ranks:_.a().min(1,"Require at least 1 rank select").required("required"),platoons:_.a().min(1,"Require at least 1 platoon select").required("required"),pioneers:_.b(),wspecs:_.b()}),$=function(e){var t=e.ranks,a=e.rankIds,n=e.platoons,l=e.platoonIds,r=e.statuses,s=e.statusIds,c=e.pointSystem,m=e.date,u=e.setSelectedPersonnels,v=Object(o.useState)(!1),f=Object(Q.a)(v,2),b=f[0],y=f[1],k=function(){return""===m?J.a.fire({title:"Assign Date First",text:"Please assign a date first before using generate personnels",confirmButtonText:"Okay!"}):function(e){return I()(e,"DDMMYY",!0).isValid()}(m)?y(!b):J.a.fire({title:"Invalid Date Format",text:"Please make sure that your date is DDMMYY format",confirmButtonText:"Okay!"})},N=Object(o.useState)([]),S=Object(Q.a)(N,2),x=S[0],P=S[1],j=Object(o.useState)([]),A=Object(Q.a)(j,2),w=A[0],O=A[1],D=Object(o.useState)(!1),C=Object(Q.a)(D,2),M=C[0],Y=C[1],F=Object(R.b)({initialValues:{ranks:[],platoons:[],onlyStatus:!1,statusNotAllowed:[],pioneers:1,wspecs:0},validationSchema:Z,validate:X,onSubmit:function(e){var t,a,n,l,r,s,o,i,d,p;return z.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return Y(!0),t=e.ranks,a=e.platoons,n=e.onlyStatus,l=e.statusNotAllowed,r=e.pioneers,s=e.wspecs,o={pointSystemId:c,date:I()(m,"DDMMYY",!0).format("DD-MM-YYYY"),ranks:t,platoons:a},n&&0===l.length?o.onlyStatus=!0:l.length>0&&!n&&(o.statusNotAllowed=l),r>0&&(o.pioneers=r),s>0&&(o.wspecs=s),E.prev=6,E.next=9,z.a.awrap(K.a.generateName(o));case 9:(i=E.sent).ok?(d=i.data.map((function(e){return e._id})),u(d),k()):401===i.status?O(["Unauthenticated, please refresh the page or logout"]):(p=[],i.data.message&&p.push(i.data.message),i.data.errors&&(p=w.concat(i.data.errors)),O(p)),E.next=16;break;case 13:E.prev=13,E.t0=E.catch(6),O([E.t0.message||"Unable to generate names"]);case 16:Y(!1);case 17:case"end":return E.stop()}}),null,null,[[6,13]])}}),_=null;return _=M?i.a.createElement(B.a,{color:"primary"}):i.a.createElement(i.a.Fragment,null,i.a.createElement(E.a,{color:"success",onClick:F.handleSubmit,disabled:F.isSubmitting},"Generate")," ",i.a.createElement(E.a,{color:"secondary",onClick:k},"Cancel")),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(T.a,{isOpen:b,toggle:k},i.a.createElement(G.a,{toggle:k},"Generate"),i.a.createElement(H.a,null,i.a.createElement(d.a,null,i.a.createElement(p.a,null,i.a.createElement(V.a,null,i.a.createElement(g.a,{for:"PioneersQty"},"Pioneers Qty"),i.a.createElement(h.a,{type:"number",name:"pioneers",id:"PioneersQty",value:F.values.pioneers,onChange:F.handleChange,invalid:F.touched.pioneers&&F.errors.pioneers&&""!==F.errors.pioneers,disabled:F.isSubmitting}),F.touched.pioneers&&F.errors.pioneers?i.a.createElement(q.a,null,F.errors.pioneers):null),i.a.createElement(V.a,null,i.a.createElement(g.a,{for:"WSQty"},"WSpec Qty"),i.a.createElement(h.a,{type:"number",name:"wspecs",id:"WSQty",value:F.values.wspecs,onChange:F.handleChange,invalid:F.touched.wspecs&&F.errors.wspecs&&""!==F.errors.wspecs,disabled:F.isSubmitting}),F.touched.wspecs&&F.errors.wspecs?i.a.createElement(q.a,null,F.errors.wspecs):null),i.a.createElement(V.a,null,i.a.createElement(g.a,{for:"selectPlatoons"},"Platoons"),i.a.createElement(h.a,{type:"select",name:"platoons",id:"selectPlatoons",multiple:!0,value:F.values.platoons,onChange:F.handleChange,invalid:F.touched.platoons&&F.errors.platoons&&""!==F.errors.platoons,disabled:F.isSubmitting},l.map((function(e){var t=n[e];return i.a.createElement("option",{value:e,key:e},t.name)}))),i.a.createElement(V.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",onChange:function(e){e.target.checked?F.setFieldValue("platoons",l):F.setFieldValue("platoons",[])},disabled:F.isSubmitting,checked:F.values.platoons.length===l.length})," ","All Platoons")),F.touched.platoons&&F.errors.platoons?i.a.createElement(q.a,null,F.errors.platoons):null),i.a.createElement(V.a,null,i.a.createElement(g.a,{for:"selectRanks"},"Ranks"),i.a.createElement(h.a,{type:"select",name:"ranks",id:"selectRanks",multiple:!0,value:F.values.ranks,onChange:F.handleChange,invalid:F.touched.ranks&&F.errors.ranks&&""!==F.errors.ranks,disabled:F.isSubmitting},a.map((function(e){var a=t[e];return i.a.createElement("option",{value:e,key:e},a.name)}))),i.a.createElement(V.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",onChange:function(e){e.target.checked?F.setFieldValue("ranks",a):F.setFieldValue("ranks",[])},disabled:F.isSubmitting,checked:F.values.ranks.length===a.length})," ","All Ranks")),F.touched.ranks&&F.errors.ranks?i.a.createElement(q.a,null,F.errors.ranks):null),i.a.createElement(V.a,null,i.a.createElement(g.a,{for:"selectStatuses"},"Statuses not allowed"),i.a.createElement(h.a,{type:"select",name:"statusNotAllowed",id:"selectStatuses",multiple:!0,value:F.values.statusNotAllowed,onChange:F.handleChange,disabled:F.isSubmitting},s.map((function(e){var t=r[e];return i.a.createElement("option",{value:e,key:e},t.name)})))),i.a.createElement(V.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",onChange:function(e){e.target.checked?(P(F.values.statusNotAllowed),F.setFieldValue("statusNotAllowed",s),F.values.onlyStatus&&F.setFieldValue("onlyStatus",!1)):(F.setFieldValue("statusNotAllowed",x),P([]))},disabled:F.isSubmitting,checked:F.values.statusNotAllowed.length===s.length})," ","Exclude All Status")),i.a.createElement(V.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",name:"onlyStatus",disabled:F.isSubmitting,onChange:function(e){e.target.checked?(P(F.values.statusNotAllowed),F.setFieldValue("statusNotAllowed",[]),F.setFieldValue("onlyStatus",!0)):(F.setFieldValue("statusNotAllowed",x),F.setFieldValue("onlyStatus",!1),P([]))},checked:F.values.onlyStatus})," ","Statuses Only")))),w.length>0&&i.a.createElement(d.a,null,i.a.createElement(p.a,null,w.map((function(e){return i.a.createElement("p",{className:"text-danger",key:e},e)}))))),i.a.createElement(U.a,null,_)),i.a.createElement(E.a,{color:"primary",onClick:k},"Generate Personnels")))},ee=_.c().shape({name:_.d().min(3).max(50).required("Name is required"),date:_.d().required("Date is required").test("checkValidDate","Invalid date, only DDMMYY is allowed",(function(e){return I()(e,"DDMMYY",!0).isValid()})),pointSystem:_.d().required("Point System is required"),pointAllocation:_.b().min(1,"Minimum of 1 point is needed").required("Point Allocation is required"),selectedPersonnels:_.a().min(1,"At least 1 personnels is required").required("Personnel is required")}),te=function(e){var t=e.points,a=e.pointIds,n=e.platoonIds,l=e.platoons,r=e.rankIds,s=e.ranks,c=e.statusIds,o=e.statuses,m=e.personnels,u=e.isAdding,v=e.handleSubmit,f=Object(R.b)({initialValues:{name:"",date:"",pointSystem:a[0]||"",pointAllocation:1,selectedPersonnels:[]},validationSchema:ee,onSubmit:v});return i.a.createElement(Y.a,{onSubmit:f.handleSubmit},i.a.createElement(d.a,null,i.a.createElement(p.a,null,i.a.createElement(V.a,null,i.a.createElement(g.a,{for:"Name"},"Name"),i.a.createElement(h.a,{type:"text",name:"name",id:"Name",placeholder:"Name of the event",onChange:f.handleChange,value:f.values.name,disabled:f.isSubmitting,invalid:f.touched.name&&f.errors.name&&""!==f.errors.name}),f.touched.name&&f.errors.name?i.a.createElement(q.a,null,f.errors.name):null),i.a.createElement(V.a,null,i.a.createElement(g.a,{for:"PointSystem"},"Point System"),i.a.createElement(h.a,{type:"select",name:"pointSystem",id:"PointSystem",value:f.values.pointSystem,disabled:f.isSubmitting,onChange:f.handleChange,invalid:f.touched.pointSystem&&f.errors.pointSystem&&""!==f.errors.pointSystem},a.map((function(e){return i.a.createElement("option",{key:e,value:e},t[e].name)}))),f.touched.pointSystem&&f.errors.pointSystem?i.a.createElement(q.a,null,f.errors.pointSystem):null),i.a.createElement(V.a,null,i.a.createElement(g.a,{for:"Date"},"Date"),i.a.createElement(h.a,{type:"text",name:"date",id:"Date",disabled:f.isSubmitting,placeholder:"e.g. ".concat(I()().tz("Asia/Singapore").format("DDMMYY")),onChange:f.handleChange,value:f.values.date,invalid:f.touched.date&&f.errors.date&&""!==f.errors.date}),f.touched.date&&f.errors.date?i.a.createElement(q.a,null,f.errors.date):null,i.a.createElement(F.a,{color:"muted"},"Must be in DDMMYY format, it will automatically convert to DD-MM-YYYY during submission")),i.a.createElement(V.a,null,i.a.createElement(g.a,{for:"PointAllocation"},"Point Allocation"),i.a.createElement(h.a,{type:"number",name:"pointAllocation",disabled:f.isSubmitting,id:"PointAllocation",onChange:f.handleChange,value:f.values.pointAllocation,invalid:f.touched.pointAllocation&&f.errors.pointAllocation&&""!==f.errors.pointAllocation}),i.a.createElement(F.a,{color:"muted"},"Min of 1 is needed to create event"),f.touched.pointAllocation&&f.errors.pointAllocation?i.a.createElement(q.a,null,f.errors.pointAllocation):null))),f.touched.selectedPersonnels&&f.errors.selectedPersonnels?i.a.createElement(d.a,null,i.a.createElement(p.a,null,i.a.createElement("p",{className:"text-danger"},f.errors.selectedPersonnels))):null,i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex justify-content-start align-items-center"},i.a.createElement("p",{className:"font-weight-bold"},"Total Selected: ",f.values.selectedPersonnels.length)),i.a.createElement(p.a,{className:"d-flex justify-content-end align-items-center"},i.a.createElement($,{platoonIds:n,platoons:l,rankIds:r,ranks:s,statusIds:c,statuses:o,setSelectedPersonnels:function(e){f.setFieldValue("selectedPersonnels",e)},pointSystem:f.values.pointSystem,date:f.values.date}))),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,{className:"overflow-auto",style:{maxHeight:"150px"}},f.values.selectedPersonnels.map((function(e){var t=m[e];return i.a.createElement(d.a,{key:e},i.a.createElement(p.a,null,i.a.createElement("p",null,t.platoon.name," ",t.rank.name," ",t.name)))})))),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"text-center"},f.isSubmitting||u?i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{color:"primary"}),i.a.createElement("p",null,"Adding...")):i.a.createElement(E.a,{size:"lg",className:"w-100",color:"success",type:"submit",disabled:f.isSubmitting},"Create"))))},ae=a(62),ne=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,c=new Array(l),o=0;o<l;o++)c[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).handleSubmit=function(e){var t=e.name,n=e.date,l=e.pointSystem,r=e.pointAllocation,s=e.selectedPersonnels;(0,a.props.addEvent)({name:t,date:I()(n,"DDMMYY",!0).format("DD-MM-YYYY"),pointSystemId:l,pointAllocation:r,personnels:s})},a.renderErrors=function(){var e=a.props.errors;return e.length<=0?null:i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(O.a,{color:"danger"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.isAdding,n=t.errors,l=t.history;e.isAdding&&!a&&0===n.length&&l.replace("/events")}},{key:"render",value:function(){var e=this.props,t=e.pointIds,a=e.points,n=e.personnels,l=e.rankIds,r=e.ranks,s=e.platoonIds,c=e.platoons,o=e.statusIds,m=e.statuses,E=e.isAdding,g=this.renderErrors();return i.a.createElement(j.a,null,i.a.createElement(u.a,{className:"mb-2"},i.a.createElement(d.a,{className:"mt-2"},i.a.createElement(p.a,null,i.a.createElement(D.a,{tag:"nav"},i.a.createElement(C.a,{tag:b.b,to:"/events"},"Events"),i.a.createElement(C.a,{active:!0,tag:"span"},"Add")))),g,i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement("h1",null,"Add new event"))),i.a.createElement(te,{pointIds:t,points:a,platoonIds:s,platoons:c,rankIds:l,ranks:r,statusIds:o,statuses:m,personnels:n,isAdding:E,handleSubmit:this.handleSubmit,logout:this.logout})))}}]),t}(o.PureComponent),le={addEvent:ae.a},re=Object(f.b)((function(e){return{points:e.points.get("points"),pointIds:e.points.get("ids"),personnels:e.personnels.get("personnels"),rankIds:e.ranks.get("ids"),ranks:e.ranks.get("ranks"),platoonIds:e.platoons.get("ids"),platoons:e.platoons.get("platoons"),statusIds:e.statuses.get("ids"),statuses:e.statuses.get("statuses"),errors:e.pages.events.add.get("errors"),isAdding:e.pages.events.add.get("isAdding")}}),le)(ne),se=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.events,a=e.personnels,n=t[e.match.params.eventId];return i.a.createElement(j.a,null,i.a.createElement(u.a,null,i.a.createElement(v.Helmet,null,i.a.createElement("title",null,"Event - Details")),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(D.a,{tag:"nav"},i.a.createElement(C.a,{tag:b.b,to:"/events"},"Events"),i.a.createElement(C.a,{active:!0,tag:"span"},"Details"),i.a.createElement(C.a,{active:!0,tag:"span"},n.name)))),i.a.createElement(d.a,{className:"my-2 justify-content-center align-items-center"},i.a.createElement(p.a,{xs:"9"},i.a.createElement("h1",null,"Details")),i.a.createElement(p.a,{xs:"3",className:"d-flex justify-content-end"},i.a.createElement(E.a,{size:"md",color:"danger",tag:b.b,to:"/events/".concat(n._id,"/delete")},"Delete"))),i.a.createElement(d.a,null,i.a.createElement(y.a,{responsive:!0,striped:!0},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Name"),i.a.createElement("td",{className:"text-center"},n.name)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Date"),i.a.createElement("td",{className:"text-center"},n.date)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Point System"),i.a.createElement("td",{className:"text-center"},n.pointSystem.name)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Points Allocation"),i.a.createElement("td",{className:"text-center"},n.pointsAllocation))))),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement("h3",null,"Personnels"))),i.a.createElement(d.a,null,i.a.createElement(y.a,{responsive:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Platoon"),i.a.createElement("th",{className:"text-center"},"Rank"),i.a.createElement("th",{className:"text-center"},"Name"))),i.a.createElement("tbody",null,n.personnels.map((function(e){var t=a[e._id];return i.a.createElement("tr",{key:t._id},i.a.createElement("td",{className:"text-center"},t.platoon.name),i.a.createElement("td",{className:"text-center"},t.rank.name),i.a.createElement("td",{className:"text-center"},t.name))})))))))}}]),t}(o.PureComponent),ce=Object(f.b)((function(e){return{events:e.events.get("events"),personnels:e.personnels.get("personnels")}}))(se),oe=a(342),ie=a(343),me=a(345),ue=a(61),de=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).handleRevert=function(e){var t=e.target.checked;a.setState({revert:t})},a.goBack=function(){(0,a.props.history.goBack)()},a.handleDelete=function(){var e=a.props,t=e.events,n=e.match.params.eventId,l=e.deleteEvent,r=a.state.revert;l({eventId:t[n]._id,revert:r})},a.getActionButtons=function(){return a.props.isDeleting?i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"text-center"},i.a.createElement(B.a,{size:"lg",color:"primary"}),i.a.createElement("p",null,"Deleting..."))):i.a.createElement(d.a,null,i.a.createElement(p.a,{xs:"6"},i.a.createElement(E.a,{color:"primary",size:"lg",className:"w-100",onClick:a.goBack},"Cancel")),i.a.createElement(p.a,{xs:"6"},i.a.createElement(E.a,{color:"danger",size:"lg",className:"w-100",onClick:a.handleDelete},"Confirm Delete")))},a.getAlertMessage=function(){return a.state.revert?i.a.createElement(O.a,{color:"danger"},"Removing this event will deduct points from personnels"):i.a.createElement(O.a,{color:"success"},"Removing this event will not deduct points")},a.getErrors=function(){var e=a.props.errors;return 0===e.length?null:i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(O.a,{color:"danger"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a.state={revert:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.events,a=e.match.params.eventId,n=e.isDeleting,l=this.state.revert,r=t[a]||null;if(!r)return i.a.createElement(m.a,{to:"/events"});var s=this.getErrors(),c=this.getAlertMessage(),o=this.getActionButtons();return i.a.createElement(j.a,null,i.a.createElement(u.a,null,s,i.a.createElement(d.a,{className:"mt-2"},i.a.createElement(p.a,null,i.a.createElement("h3",{className:"text-danger"},"Deleting event is irreversible!"))),i.a.createElement(d.a,{className:"my-2 mx-1"},i.a.createElement(oe.a,{body:!0},i.a.createElement(ie.a,{className:"text-center"},i.a.createElement("p",{className:"font-weight-bold"},"Deleting")),i.a.createElement(me.a,null,"Name: ",r.name),i.a.createElement(me.a,null,"Point System: ",r.pointSystem.name),i.a.createElement(me.a,null,"Points: ",r.pointsAllocation))),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex align-items-center justify-content-center"},i.a.createElement(V.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",id:"revertCheckBox",checked:l,onChange:this.handleRevert,disabled:n}),i.a.createElement(g.a,{for:"revertCheckBox"},"Revert Points")))),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex align-items-center justify-content-center"},l&&i.a.createElement("p",{className:"font-weight-bold"},"Total Affected Personnels: ",r.personnels.length))),i.a.createElement(d.a,null,i.a.createElement(p.a,null,c)),o))}}]),t}(o.PureComponent),pe={deleteEvent:ue.a},Ee=Object(f.b)((function(e){return{events:e.events.get("events"),isDeleting:e.pages.events.delete.get("isDeleting"),errors:e.pages.events.delete.get("errors")}}),pe)(de),ge=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.match.path;return i.a.createElement(m.d,null,i.a.createElement(m.b,{exact:!0,path:e,component:w}),i.a.createElement(m.b,{exact:!0,path:"".concat(e,"/add"),component:re}),i.a.createElement(m.b,{exact:!0,path:"".concat(e,"/:eventId/delete"),component:Ee}),i.a.createElement(m.b,{exact:!0,path:"".concat(e,"/:eventId"),component:ce}))}}]),t}(o.PureComponent);a.d(t,"default",(function(){return ge}))}}]);
//# sourceMappingURL=9.25ba29bf.chunk.js.map