(this.webpackJsonpfrontend_duty=this.webpackJsonpfrontend_duty||[]).push([[9],{262:function(e,t,a){"use strict";var n=a(28),l=a(5);t.a=function(e,t){return Object(n.c)((function(a){return"string"===typeof e?a.pages[e].get(t):e.reduce((function(e,t){return e&&"undefined"!==e[t]?e[t]:Object(l.Map)()}),a.pages).get(t)}))}},290:function(e,t,a){"use strict";var n=a(1),l=a.n(n),r=a(310),c=a.n(r);t.a=function(e){var t=e.rowsPerPage,a=e.totalPosts,r=e.setPage,s=Object(n.useMemo)((function(){for(var e=[],n=1;n<=Math.ceil(a/t);n+=1)e.push(n);return e}),[a,t]),o=Object(n.useCallback)((function(e){var t=e.selected;r(t+1)}),[r]);return 0===s.length?null:l.a.createElement("nav",{"aria-label":"Page pagination"},l.a.createElement(c.a,{previousLabel:"\xab",previousClassName:"page-item",previousLinkClassName:"page-link",nextLabel:"\xbb",nextClassName:"page-item",nextLinkClassName:"page-link",breakLabel:"...",breakClassName:"page-item",breakLinkClassName:"page-link",pageCount:s.length,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:o,containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"page-item active",activeLinkClassName:"page-item active",disabledClassName:"page-item disabled"}))}},291:function(e,t,a){"use strict";var n=a(1);t.a=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}},314:function(e,t,a){"use strict";var n=a(1);t.a=function(){var e=Object(n.useRef)(!0);return Object(n.useEffect)((function(){return function(){e.current=!1}}),[]),e}},315:function(e,t,a){"use strict";var n=a(1),l=a(263),r=a.n(l);t.a=function(e,t){return Object(n.useCallback)((function(){return t?r.a.fire({title:"Success!",text:e,icon:"success",confirmButtonColor:"#007bff",timer:2e3,timerProgressBar:!0}):r.a.fire({title:"Success!",text:e,confirmButtonColor:"#007bff",icon:"success"})}),[e,t])}},371:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(54),c=a(94),s=a(254),o=a(255),i=a(257),m=a(124),u=a(358),d=a(359),E=a(360),p=a(68),g=a(28),b=a(29),f=a(362),v=(a(5),Object(n.memo)((function(e){var t=e.events,a=e.path;return 0===t.size?l.a.createElement("p",null,"No events available"):l.a.createElement(f.a,{striped:!0,responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center"},"Name"),l.a.createElement("th",{className:"text-center"},"Date"),l.a.createElement("th",{className:"text-center"},"Point System"),l.a.createElement("th",{className:"text-center"},"Actions"))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",{key:e.get("_id")},l.a.createElement("td",{className:"text-center"},e.get("name")),l.a.createElement("td",{className:"text-center"},e.get("date")),l.a.createElement("td",{className:"text-center"},e.getIn(["pointSystem","name"])),l.a.createElement("td",{className:"text-center"},l.a.createElement(o.a,null,l.a.createElement(m.a,{tag:b.b,to:"".concat(a,"/").concat(e.get("_id")),color:"primary"},"View")),l.a.createElement(o.a,{className:"my-2"},l.a.createElement(m.a,{color:"danger",tag:b.b,to:"".concat(a,"/").concat(e.get("_id"),"/delete")},"Delete"))))}))))}))),h=a(290),y=a(93),O=a(265),j=Object(O.a)((function(e){return e.events.get("ids")}),(function(e){return e.events.get("events")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),k=Object(O.a)((function(e){return e.points.get("ids")}),(function(e){return e.points.get("points")}),(function(e,t){return e.map((function(e){return t.get(e)}))}));var N=Object(n.memo)((function(){var e=Object(r.i)().path,t=Object(n.useState)(10),a=Object(c.a)(t,1)[0],f=Object(n.useState)(1),O=Object(c.a)(f,2),N=O[0],S=O[1],x=Object(n.useState)("ALL"),C=Object(c.a)(x,2),D=C[0],P=C[1],Y=Object(g.c)(j),M=Object(g.c)(k),A=Object(n.useMemo)((function(){var e=N*a,t=e-a;return"ALL"===D?Y.slice(t,e):Y.filter((function(e){return e.getIn(["pointSystem","name"])===D})).slice(t,e)}),[Y,D,N,a]),w=Object(n.useCallback)((function(e){var t=e.target.value;return P(t)}),[]);return l.a.createElement(y.a,null,l.a.createElement(p.Helmet,null,l.a.createElement("title",null,"Events")),l.a.createElement(s.a,{className:"py-2"},l.a.createElement(o.a,{className:"justify-content-center align-items-center"},l.a.createElement(i.a,{xs:"9"},l.a.createElement("h1",null,"Events")),l.a.createElement(i.a,{xs:"3",className:"d-flex justify-content-end"},l.a.createElement(m.a,{color:"success",size:"md",tag:b.b,to:"".concat(e,"/add")},"Add"))),l.a.createElement(o.a,null,l.a.createElement(i.a,{xs:"12"},l.a.createElement("p",{className:"text-danger"},"Note: Past events that have expired will automatically be removed, points will be retained."))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"filterSelect"},"Filter"),l.a.createElement(E.a,{type:"select",name:"filterSelect",id:"filterSelect",onChange:w},l.a.createElement("option",{value:"ALL"},"ALL"),M.map((function(e){return l.a.createElement("option",{key:e.get("_id"),value:e.get("name")},e.get("name"))})))))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(v,{events:A,path:e}))),l.a.createElement(o.a,{className:"justify-content-center align-items-center"},l.a.createElement(i.a,null,l.a.createElement(h.a,{rowsPerPage:a,setPage:S,totalPosts:Y.size})))))})),S=a(354),x=a(355),C=a(333),D=a(51),P=a.n(D),Y=a(357),M=a(361),A=a(356),w=a(276),I=a(284),_=a(340),z=a(336),V=a(3),F=a.n(V),L=a(256),q=a(380),R=a(367),B=a(368),Q=a(369),G=a(263),H=a.n(G),T=a(52),U=a(314),W=function(e){var t={};return 0===e.pioneers&&0===e.wspecs&&(t.pioneers="Must contained at least 1 in pioneers or specs",t.wspecs="Must contained at least 1 in pioneers or specs"),t},J=I.c().shape({ranks:I.a().min(1,"Require at least 1 rank select").required("required"),platoons:I.a().min(1,"Require at least 1 platoon select").required("required"),pioneers:I.b(),wspecs:I.b()});var K=Object(n.memo)((function(e){var t=e.ranks,a=e.platoons,r=e.statuses,s=e.pointSystem,p=e.date,g=e.setSelectedPersonnels,b=e.handleLogout,f=Object(n.useState)(!1),v=Object(c.a)(f,2),h=v[0],y=v[1],O=Object(n.useCallback)((function(){return""===p?H.a.fire({title:"Assign Date First",text:"Please assign a date first before using generate personnels",confirmButtonText:"Okay!"}):function(e){return P()(e,"DDMMYY",!0).isValid()}(p)?y(!h):H.a.fire({title:"Invalid Date Format",text:"Please make sure that your date is DDMMYY format",confirmButtonText:"Okay!"})}),[p,h]),j=Object(n.useState)([]),k=Object(c.a)(j,2),N=k[0],S=k[1],x=function(e){var t=e.date,a=e.handle401,l=e.pointSystem,r=e.setSelectedPersonnels,s=e.toggle,o=Object(U.a)(),i=Object(n.useState)([]),m=Object(c.a)(i,2),u=m[0],d=m[1],E=Object(n.useState)(!1),p=Object(c.a)(E,2),g=p[0],b=p[1];return{handleFormSubmission:Object(n.useCallback)((function(e){var n,c,i,m,u,E,p,g,f,v;return F.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:return o.current&&b(!0),n=e.ranks,c=e.platoons,i=e.onlyStatus,m=e.statusNotAllowed,u=e.pioneers,E=e.wspecs,p={pointSystemId:l,date:P()(t,"DDMMYY",!0).format("DD-MM-YYYY"),ranks:n,platoons:c},i&&0===m.length?p.onlyStatus=!0:m.length>0&&!i&&(p.statusNotAllowed=m),u>0&&(p.pioneers=u),E>0&&(p.wspecs=E),h.prev=6,h.next=9,F.a.awrap(T.a.generateName(p));case 9:(g=h.sent).ok?(f=g.data.map((function(e){return{value:e._id,label:"".concat(e.platoon," ").concat(e.rank," ").concat(e.name)}})),o.current&&(r(f),s())):401===g.status?o.current&&a():(v=[],g.data.message&&v.push(g.data.message),g.data.errors&&(v=v.concat(g.data.errors)),o.current&&d(v)),h.next=16;break;case 13:h.prev=13,h.t0=h.catch(6),o.current&&d([h.t0.message||"Unable to generate names"]);case 16:o.current&&b(!1);case 17:case"end":return h.stop()}}),null,null,[[6,13]])}),[t,a,o,l,r,s]),isGenerating:g,errors:u}}({date:p,handle401:b,pointSystem:s,setSelectedPersonnels:g,toggle:O}),C=x.handleFormSubmission,D=x.isGenerating,Y=x.errors,A=Object(w.a)({initialValues:{ranks:[],platoons:[],onlyStatus:!1,statusNotAllowed:[],pioneers:1,wspecs:0},validationSchema:J,validate:W,onSubmit:C}),I=null;return I=D?l.a.createElement(L.a,{color:"primary"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{color:"success",onClick:A.handleSubmit,disabled:A.isSubmitting},"Generate")," ",l.a.createElement(m.a,{color:"secondary",onClick:O},"Cancel")),l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{color:"primary",className:"w-100",onClick:O},"Generate Personnels"),l.a.createElement(q.a,{isOpen:h,toggle:O},l.a.createElement(R.a,{toggle:O},"Generate"),l.a.createElement(B.a,null,l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"PioneersQty"},"Pioneers Qty"),l.a.createElement(E.a,{type:"number",name:"pioneers",id:"PioneersQty",value:A.values.pioneers,onChange:A.handleChange,invalid:A.touched.pioneers&&A.errors.pioneers&&""!==A.errors.pioneers,disabled:A.isSubmitting}),A.touched.pioneers&&A.errors.pioneers?l.a.createElement(M.a,null,A.errors.pioneers):null),l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"WSQty"},"WSpec Qty"),l.a.createElement(E.a,{type:"number",name:"wspecs",id:"WSQty",value:A.values.wspecs,onChange:A.handleChange,invalid:A.touched.wspecs&&A.errors.wspecs&&""!==A.errors.wspecs,disabled:A.isSubmitting}),A.touched.wspecs&&A.errors.wspecs?l.a.createElement(M.a,null,A.errors.wspecs):null),l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"selectPlatoons"},"Platoons"),l.a.createElement(E.a,{type:"select",name:"platoons",id:"selectPlatoons",multiple:!0,value:A.values.platoons,onChange:A.handleChange,invalid:A.touched.platoons&&A.errors.platoons&&""!==A.errors.platoons,disabled:A.isSubmitting},a.map((function(e){return l.a.createElement("option",{value:e.get("_id"),key:e.get("_id")},e.get("name"))}))),l.a.createElement(u.a,{check:!0},l.a.createElement(d.a,{check:!0},l.a.createElement(E.a,{type:"checkbox",onChange:function(e){e.target.checked?A.setFieldValue("platoons",a.map((function(e){return e.get("_id")})).toArray()):A.setFieldValue("platoons",[])},disabled:A.isSubmitting,checked:A.values.platoons.length===a.size})," ","All Platoons")),A.touched.platoons&&A.errors.platoons?l.a.createElement(M.a,null,A.errors.platoons):null),l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"selectRanks"},"Ranks"),l.a.createElement(E.a,{type:"select",name:"ranks",id:"selectRanks",multiple:!0,value:A.values.ranks,onChange:A.handleChange,invalid:A.touched.ranks&&A.errors.ranks&&""!==A.errors.ranks,disabled:A.isSubmitting},t.map((function(e){return l.a.createElement("option",{value:e.get("_id"),key:e.get("_id")},e.get("name"))}))),l.a.createElement(u.a,{check:!0},l.a.createElement(d.a,{check:!0},l.a.createElement(E.a,{type:"checkbox",onChange:function(e){e.target.checked?A.setFieldValue("ranks",t.map((function(e){return e.get("_id")})).toArray()):A.setFieldValue("ranks",[])},disabled:A.isSubmitting,checked:A.values.ranks.length===t.size})," ","All Ranks")),A.touched.ranks&&A.errors.ranks?l.a.createElement(M.a,null,A.errors.ranks):null),l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"selectStatuses"},"Statuses not allowed"),l.a.createElement(E.a,{type:"select",name:"statusNotAllowed",id:"selectStatuses",multiple:!0,value:A.values.statusNotAllowed,onChange:A.handleChange,disabled:A.isSubmitting},r.map((function(e){return l.a.createElement("option",{value:e.get("_id"),key:e.get("_id")},e.get("name"))})))),l.a.createElement(u.a,{check:!0},l.a.createElement(d.a,{check:!0},l.a.createElement(E.a,{type:"checkbox",onChange:function(e){e.target.checked?(S(A.values.statusNotAllowed),A.setFieldValue("statusNotAllowed",r.map((function(e){return e.get("_id")})).toArray()),A.values.onlyStatus&&A.setFieldValue("onlyStatus",!1)):(A.setFieldValue("statusNotAllowed",N),S([]))},disabled:A.isSubmitting,checked:A.values.statusNotAllowed.length===r.size})," ","Exclude All Status")),l.a.createElement(u.a,{check:!0},l.a.createElement(d.a,{check:!0},l.a.createElement(E.a,{type:"checkbox",name:"onlyStatus",disabled:A.isSubmitting,onChange:function(e){e.target.checked?(S(A.values.statusNotAllowed),A.setFieldValue("statusNotAllowed",[]),A.setFieldValue("onlyStatus",!0)):(A.setFieldValue("statusNotAllowed",N),A.setFieldValue("onlyStatus",!1),S([]))},checked:A.values.onlyStatus})," ","Statuses Only")))),Y.length>0&&l.a.createElement(o.a,null,l.a.createElement(i.a,null,Y.map((function(e){return l.a.createElement("p",{className:"text-danger",key:e},e)}))))),l.a.createElement(Q.a,null,I)))}));var X=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(n.useMemo)((function(){if(""!==e&&P()(e,"DDMMYY",!0).isValid()){var n=P()(e,"DDMMYY",!0).format("DD-MM-YYYY"),l=P()(n,"DD-MM-YYYY",!0).subtract(1,"d").format("DD-MM-YYYY"),r=P()(n,"DD-MM-YYYY",!0).add(1,"d").format("DD-MM-YYYY");return t.filter((function(e){if(e.get("blockOutDates").includes(n))return!1;if(a.find((function(t){return t.value===e.get("_id")})))return!0;var t=e.get("eventsDate");return!(t.includes(n)||t.includes(l)||t.includes(r))})).map((function(e){return{value:e.get("_id"),label:"".concat(e.getIn(["platoon","name"])," ").concat(e.getIn(["rank","name"])," ").concat(e.get("name"))}}))}return t.map((function(e){return{value:e.get("_id"),label:"".concat(e.getIn(["platoon","name"])," ").concat(e.getIn(["rank","name"])," ").concat(e.get("name"))}}))}),[e,a,t])};var Z=function(e,t,a){return Object(n.useCallback)((function(n){return""!==e&&P()(e,"DDMMYY",!0).isValid()?!n&&a?t(a,[]):n||a?a?t(a,n):t(n):t([]):H.a.fire({title:"Please set a date",text:" Please assign a valid date before selecting personnels",timer:3e3})}),[e,a,t])},$=Object(z.a)(),ee=I.c().shape({name:I.d().min(1).max(50).required("Name is required"),date:I.d().required("Date is required").test("checkValidDate","Invalid date, only DDMMYY is allowed",(function(e){return P()(e,"DDMMYY",!0).isValid()})),pointSystem:I.d().required("Point System is required"),pointAllocation:I.b().min(1,"Minimum of 1 point is needed").required("Point Allocation is required"),selectedPersonnels:I.a().min(1,"At least 1 personnels is required").required("Personnel is required")}),te=Object(n.memo)((function(e){var t=e.points,a=e.platoons,r=e.ranks,c=e.statuses,s=e.personnels,p=e.isAdding,g=e.handleSubmit,b=e.handleLogout,f=Object(w.a)({initialValues:{name:"",date:"",pointSystem:t.has(0)?t.getIn(["0","_id"]):"",pointAllocation:1,selectedPersonnels:[]},validationSchema:ee,onSubmit:g}),v=Object(n.useCallback)((function(e){f.setFieldValue("selectedPersonnels",e)}),[f]),h=X(f.values.date,s),y=Z(f.values.date,f.setFieldValue,"selectedPersonnels");return l.a.createElement(Y.a,{onSubmit:f.handleSubmit},l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"Name"},"Name"),l.a.createElement(E.a,{type:"text",name:"name",id:"Name",placeholder:"Name of the event",onChange:f.handleChange,value:f.values.name,disabled:f.isSubmitting,invalid:f.touched.name&&f.errors.name&&""!==f.errors.name}),f.touched.name&&f.errors.name?l.a.createElement(M.a,null,f.errors.name):null),l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"PointSystem"},"Point System"),l.a.createElement(E.a,{type:"select",name:"pointSystem",id:"PointSystem",value:f.values.pointSystem,disabled:f.isSubmitting,onChange:f.handleChange,invalid:f.touched.pointSystem&&f.errors.pointSystem&&""!==f.errors.pointSystem},t.map((function(e){return l.a.createElement("option",{key:e.get("_id"),value:e.get("_id")},e.get("name"))}))),f.touched.pointSystem&&f.errors.pointSystem?l.a.createElement(M.a,null,f.errors.pointSystem):null),l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"Date"},"Date"),l.a.createElement(E.a,{type:"text",name:"date",id:"Date",disabled:f.isSubmitting,placeholder:"e.g. ".concat(P()().tz("Asia/Singapore").format("DDMMYY")),onChange:f.handleChange,value:f.values.date,invalid:f.touched.date&&f.errors.date&&""!==f.errors.date}),f.touched.date&&f.errors.date?l.a.createElement(M.a,null,f.errors.date):null,l.a.createElement(A.a,{color:"muted"},"Must be in DDMMYY format, it will automatically convert to DD-MM-YYYY during submission")),l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"PointAllocation"},"Point Allocation"),l.a.createElement(E.a,{type:"number",name:"pointAllocation",disabled:f.isSubmitting,id:"PointAllocation",onChange:f.handleChange,value:f.values.pointAllocation,invalid:f.touched.pointAllocation&&f.errors.pointAllocation&&""!==f.errors.pointAllocation}),l.a.createElement(A.a,{color:"muted"},"Min of 1 point is required to create event"),f.touched.pointAllocation&&f.errors.pointAllocation?l.a.createElement(M.a,null,f.errors.pointAllocation):null))),l.a.createElement(o.a,null,l.a.createElement(i.a,null)),f.touched.selectedPersonnels&&f.errors.selectedPersonnels?l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement("p",{className:"text-danger"},f.errors.selectedPersonnels))):null,l.a.createElement(o.a,null,l.a.createElement(i.a,{className:"w-100"},l.a.createElement(u.a,null,l.a.createElement(d.a,{for:"selectedPersonnels"},"Personnels Selected: [",f.values.selectedPersonnels.length,"]"),l.a.createElement(_.a,{options:h,components:$,isMulti:!0,id:"selectedPersonnels",name:"selectedPersonnels",placeholder:"Select Personnels..",value:f.values.selectedPersonnels,onChange:y})))),l.a.createElement(o.a,{className:"mt-2"},l.a.createElement(i.a,null,l.a.createElement(K,{platoons:a,ranks:r,statuses:c,setSelectedPersonnels:v,pointSystem:f.values.pointSystem,date:f.values.date,handleLogout:b}))),l.a.createElement(o.a,{className:"my-2"},l.a.createElement(i.a,{className:"text-center"},l.a.createElement(m.a,{size:"lg",className:"w-100",color:"success",type:"submit",disabled:f.isSubmitting||p},f.isSubmitting||p?"Creating...":"Create Event"))))})),ae=Object(O.a)((function(e){return e.points.get("ids")}),(function(e){return e.points.get("points")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),ne=Object(O.a)((function(e){return e.statuses.get("ids")}),(function(e){return e.statuses.get("statuses")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),le=Object(O.a)((function(e){return e.ranks.get("ids")}),(function(e){return e.ranks.get("ranks")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),re=Object(O.a)((function(e){return e.platoons.get("ids")}),(function(e){return e.platoons.get("platoons")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),ce=Object(O.a)((function(e){return e.personnels.get("ids")}),(function(e){return e.personnels.get("personnels")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),se=a(77),oe=a(11),ie=a(262);var me=Object(n.memo)((function(){var e=Object(r.g)(),t=Object(g.b)(),a=Object(n.useState)(!1),m=Object(c.a)(a,2),u=m[0],d=m[1],E=Object(g.c)(re),f=Object(g.c)(ae),v=Object(g.c)(le),h=Object(g.c)(ne),O=Object(n.useMemo)((function(){return["events","add"]}),[]),j=Object(ie.a)(O,"isAdding"),k=Object(ie.a)(O,"errors"),N=Object(g.c)(ce),D=Object(n.useCallback)((function(e){var a=e.name,n=e.date,l=e.pointSystem,r=e.pointAllocation,c=e.selectedPersonnels,s={name:a,date:P()(n,"DDMMYY",!0).format("DD-MM-YYYY"),pointSystemId:l,pointAllocation:r,personnels:c.map((function(e){return e.value}))};t(Object(se.a)(s)),d(!0)}),[t]),Y=Object(n.useCallback)((function(){t(Object(oe.d)())}),[t]);return Object(n.useEffect)((function(){var t=!0;return u&&!j&&0===k.size&&t&&e.replace("/events"),function(){t=!1}}),[k.size,e,j,u]),l.a.createElement(y.a,null,l.a.createElement(p.Helmet,null,l.a.createElement("title",null,"Add Event")),l.a.createElement(s.a,{className:"py-2"},l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(S.a,{tag:"nav"},l.a.createElement(x.a,{tag:b.b,to:"/events"},"Events"),l.a.createElement(x.a,{active:!0,tag:"span"},"Add")))),k.size>0&&l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(C.a,{color:"danger",className:"w-100"},k.map((function(e){return l.a.createElement("p",{className:"mb-0",key:e},e)}))))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement("h1",null,"Add new event"))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(te,{points:f,platoons:E,ranks:v,statuses:h,personnels:N,isAdding:j,handleSubmit:D,handleLogout:Y})))))}));var ue=Object(n.memo)((function(){var e=Object(r.h)(),t=Object(g.c)((function(e){return e.personnels.get("personnels")})),a=Object(g.c)((function(t){return t.events.get("events").get(e.eventId)}));return a&&0!==a.size?l.a.createElement(y.a,null,l.a.createElement(p.Helmet,null,l.a.createElement("title",null,"Event - Details")),l.a.createElement(s.a,{className:"py-2"},l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(S.a,{tag:"nav"},l.a.createElement(x.a,{tag:b.b,to:"/events"},"Events"),l.a.createElement(x.a,{active:!0,tag:"span"},"Details"),l.a.createElement(x.a,{active:!0,tag:"span"},a.get("name"))))),l.a.createElement(o.a,{className:"justify-content-center align-items-center"},l.a.createElement(i.a,{xs:"9"},l.a.createElement("h1",null,"Details")),l.a.createElement(i.a,{xs:"3",className:"d-flex justify-content-end"},l.a.createElement(m.a,{size:"md",color:"primary",tag:b.b,className:"mr-1",to:"/events/".concat(a.get("_id"),"/edit")},"Edit"),l.a.createElement(m.a,{size:"md",color:"danger",tag:b.b,to:"/events/".concat(a.get("_id"),"/delete")},"Delete"))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(f.a,{responsive:!0,striped:!0},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center"},"Name"),l.a.createElement("td",{className:"text-center"},a.get("name"))),l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center"},"Date"),l.a.createElement("td",{className:"text-center"},a.get("date"))),l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center"},"Point System"),l.a.createElement("td",{className:"text-center"},a.getIn(["pointSystem","name"]))),l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center"},"Points Allocation"),l.a.createElement("td",{className:"text-center"},a.get("pointsAllocation"))))))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement("h3",null,"Personnels"))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(f.a,{responsive:!0,striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center"},"Platoon"),l.a.createElement("th",{className:"text-center"},"Rank"),l.a.createElement("th",{className:"text-center"},"Name"))),l.a.createElement("tbody",null,a.get("personnels").map((function(e){var a=t.get(e.get("_id"));return l.a.createElement("tr",{key:a.get("_id")},l.a.createElement("td",{className:"text-center"},a.getIn(["platoon","name"])),l.a.createElement("td",{className:"text-center"},a.getIn(["rank","name"])),l.a.createElement("td",{className:"text-center"},a.get("name")))})))))))):l.a.createElement(r.a,{to:"/events"})})),de=a(334),Ee=a(348),pe=a(350);var ge=Object(n.memo)((function(e){var t=e.isDeleting,a=e.handleCancel,n=e.handleConfirm;return t?l.a.createElement(o.a,null,l.a.createElement(i.a,{className:"text-center"},l.a.createElement(L.a,{size:"lg",color:"primary"}),l.a.createElement("p",null,"Deleting..."))):l.a.createElement(o.a,null,l.a.createElement(i.a,{xs:"6"},l.a.createElement(m.a,{color:"primary",size:"lg",className:"w-100",onClick:a},"Cancel")),l.a.createElement(i.a,{xs:"6"},l.a.createElement(m.a,{color:"danger",size:"lg",className:"w-100",onClick:n},"Confirm Delete")))})),be=a(58);var fe=Object(n.memo)((function(){var e=Object(r.g)(),t=Object(r.h)(),a=Object(n.useState)(!1),m=Object(c.a)(a,2),b=m[0],f=m[1],v=Object(g.c)((function(e){return e.events.get("events")})),h=Object(n.useMemo)((function(){return["events","delete"]}),[]),O=Object(ie.a)(h,"isDeleting"),j=Object(ie.a)(h,"errors"),k=Object(g.b)(),N=Object(n.useCallback)((function(e){var t=e.target.checked;f(t)}),[]),S=Object(n.useCallback)((function(){k(Object(be.a)({eventId:t.eventId,revert:b}))}),[k,t.eventId,b]),x=v.get(t.eventId);return x&&0!==x.size?l.a.createElement(y.a,null,l.a.createElement(p.Helmet,null,"Delete Event"),l.a.createElement(s.a,{className:"py-2"},0!==j.size?l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(C.a,{color:"danger",className:"w-100"},j.map((function(e){return l.a.createElement("p",{className:"mb-0",key:e},e)}))))):null,l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement("h3",{className:"text-danger"},"Deleting event is irreversible!"))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,b?l.a.createElement(C.a,{color:"danger"},"Removing this event will deduct points and remove event date from personnels"):l.a.createElement(C.a,{color:"success"},"Removing this event will not affect points and event date in personnels"))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(de.a,{body:!0},l.a.createElement(Ee.a,null,l.a.createElement("p",{className:"font-weight-bold mb-0"},"Deleting")),l.a.createElement(pe.a,null,"Name: ",x.get("name")," ",l.a.createElement("br",null),"Point System: ",x.getIn(["pointSystem","name"]),l.a.createElement("br",null),"Points: ",x.get("pointsAllocation"))))),l.a.createElement(o.a,{className:"my-2"},l.a.createElement(i.a,{sm:12,md:8,className:"my-2 align-self-end"},l.a.createElement(u.a,{check:!0},l.a.createElement(E.a,{type:"checkbox",id:"revertCheckBox",checked:b,onChange:N,disabled:O}),l.a.createElement(d.a,{for:"revertCheckBox"},"Revert Points and Event Date"))),l.a.createElement(i.a,{sm:12,md:4,className:"my-2"},b&&l.a.createElement("p",{className:"font-weight-bold m-0 p-0"},"Total Affected Personnels: ",x.get("personnels").size))),l.a.createElement(ge,{handleCancel:e.goBack,handleConfirm:S,isDeleting:O}))):l.a.createElement(r.a,{to:"/events"})})),ve=Object(O.a)((function(e){return e.personnels.get("ids")}),(function(e){return e.personnels.get("personnels")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),he=Object(O.a)((function(e){return e.events.get("events")}),(function(e,t){return t}),(function(e,t){return e.get(t)})),ye=a(67),Oe=a(315);var je=function(e,t){return Object(n.useCallback)((function(){return t?H.a.fire({icon:"error",title:"Oops...",text:e,timer:t,timerProgressBar:!0}):H.a.fire({icon:"error",title:"Oops...",text:e})}),[e,t])},ke=a(291),Ne=Object(z.a)();var Se=function(){var e=Object(r.h)(),t=Object(r.g)(),a=Object(Oe.a)("Successfully Updated!",2e3),u=je("You cannot save with empty personnel",2e3),d=Object(g.b)(),E=Object(g.c)(ve),v=Object(g.c)((function(e){return e.personnels.get("personnels")})),h=Object(g.c)((function(t){return he(t,e.eventId)})),O=Object(ie.a)(["events","edit"],"errors"),j=Object(ie.a)(["events","edit"],"isUpdating"),k=Object(ke.a)(j);Object(n.useEffect)((function(){k&&!j&&0===O.size&&a()}),[O.size,j,k,a]);var N=Object(n.useMemo)((function(){return h.get("personnels").map((function(e){var t=e.get("_id"),a=v.get(t);return{value:t,label:"".concat(a.getIn(["platoon","name"])," ").concat(a.getIn(["rank","name"])," ").concat(a.get("name"))}})).toArray()}),[v,h]),C=Object(n.useMemo)((function(){return P()(h.get("date"),"DD-MM-YYYY",!0).format("DDMMYY")}),[h]),D=X(C,E,N),Y=Object(n.useState)(N),M=Object(c.a)(Y,2),A=M[0],w=M[1],I=Z(C,w),z=Object(n.useCallback)((function(){return t.length>1?t.goBack():t.replace("/events/".concat(e.eventId))}),[t,e.eventId]),V=Object(n.useCallback)((function(){if(0===A.length)return u();var t=A.map((function(e){return e.value}));return d(Object(ye.a)(e.eventId,t))}),[d,e.eventId,A,u]);return h&&0!==h.size?l.a.createElement(y.a,null,l.a.createElement(p.Helmet,null,l.a.createElement("title",null,"Edit Event")),l.a.createElement(s.a,{className:"py-2"},l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(S.a,{tag:"nav"},l.a.createElement(x.a,{tag:b.b,to:"/events"},"Events"),l.a.createElement(x.a,{tag:"span"},"Details"),l.a.createElement(x.a,{tag:b.b,to:"/events/".concat(e.eventId)},h.get("name")),l.a.createElement(x.a,{active:!0,tag:"span"},"Edit")))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(f.a,{striped:!0,responsive:!0},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center"},"Event Name"),l.a.createElement("td",{className:"text-center"},h.get("name"))),l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center"},"Event date"),l.a.createElement("td",{className:"text-center"},h.get("date"))),l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center"},"Points allocation"),l.a.createElement("td",{className:"text-center"},h.get("pointsAllocation"))))))),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement("p",{className:"mb-0"},"Personnels:"),l.a.createElement(_.a,{options:D,components:Ne,isMulti:!0,id:"selectedPersonnels",name:"selectedPersonnels",placeholder:"Select Personnels..",value:A,onChange:I}))),l.a.createElement(o.a,null,l.a.createElement(i.a,{md:"6",className:"mt-2"},l.a.createElement(m.a,{onClick:z,color:"primary",className:"w-100"},"Cancel")),l.a.createElement(i.a,{md:"6",className:"mt-2"},l.a.createElement(m.a,{color:"success",className:"w-100",onClick:V},"Save"))))):l.a.createElement(r.a,{to:"/events"})};var xe=Object(n.memo)((function(){var e=Object(r.i)().path;return l.a.createElement(r.d,null,l.a.createElement(r.b,{exact:!0,path:e,component:N}),l.a.createElement(r.b,{exact:!0,path:"".concat(e,"/add"),component:me}),l.a.createElement(r.b,{exact:!0,path:"".concat(e,"/:eventId/delete"),component:fe}),l.a.createElement(r.b,{exact:!0,path:"".concat(e,"/:eventId/edit"),component:Se}),l.a.createElement(r.b,{exact:!0,path:"".concat(e,"/:eventId"),component:ue}))}));a.d(t,"default",(function(){return xe}))}}]);
//# sourceMappingURL=9.4c7c639b.chunk.js.map