(this.webpackJsonpfrontend_duty=this.webpackJsonpfrontend_duty||[]).push([[9],{296:function(e,t,a){"use strict";var n=a(1),l=a.n(n),s=a(330),r=a.n(s);t.a=function(e){var t=e.rowsPerPage,a=e.totalPosts,s=e.setPage,c=Object(n.useMemo)((function(){for(var e=[],n=1;n<=Math.ceil(a/t);n+=1)e.push(n);return e}),[a,t]);if(0===c.length)return null;return l.a.createElement("nav",{"aria-label":"Page pagination"},l.a.createElement(r.a,{previousLabel:"\xab",previousClassName:"page-item",previousLinkClassName:"page-link",nextLabel:"\xbb",nextClassName:"page-item",nextLinkClassName:"page-link",breakLabel:"...",breakClassName:"page-item",breakLinkClassName:"page-link",pageCount:c.length,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(e){var t=e.selected;s(t+1)},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"page-item active",activeLinkClassName:"page-item active",disabledClassName:"page-item disabled"}))}},345:function(e,t,a){"use strict";var n=a(5),l=a(9),s=a(1),r=a.n(s),c=a(2),o=a.n(c),i=a(16),m=a.n(i),u=a(6),d={tag:u.n,className:o.a.string,cssModule:o.a.object},p=function(e){var t=e.className,a=e.cssModule,s=e.tag,c=Object(l.a)(e,["className","cssModule","tag"]),o=Object(u.j)(m()(t,"card-title"),a);return r.a.createElement(s,Object(n.a)({},c,{className:o}))};p.propTypes=d,p.defaultProps={tag:"div"},t.a=p},347:function(e,t,a){"use strict";var n=a(5),l=a(9),s=a(1),r=a.n(s),c=a(2),o=a.n(c),i=a(16),m=a.n(i),u=a(6),d={tag:u.n,className:o.a.string,cssModule:o.a.object},p=function(e){var t=e.className,a=e.cssModule,s=e.tag,c=Object(l.a)(e,["className","cssModule","tag"]),o=Object(u.j)(m()(t,"card-text"),a);return r.a.createElement(s,Object(n.a)({},c,{className:o}))};p.propTypes=d,p.defaultProps={tag:"p"},t.a=p},365:function(e,t,a){"use strict";a.r(t);var n=a(21),l=a(22),s=a(50),r=a(49),c=a(51),o=a(1),i=a.n(o),m=a(54),u=a(273),d=a(274),p=a(276),E=a(132),g=a(339),h=a(340),v=a(283),b=a(44),f=a(42),y=a(356),k=function(e){var t=e.events,a=e.path;return 0===t.length?i.a.createElement(d.a,{className:"my-2 mx-2"},"No events available"):i.a.createElement(y.a,{striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Name"),i.a.createElement("th",{className:"text-center"},"Date"),i.a.createElement("th",{className:"text-center"},"Point System"),i.a.createElement("th",{className:"text-center"},"Actions"))),i.a.createElement("tbody",null,t.map((function(e){return i.a.createElement("tr",{key:e._id},i.a.createElement("td",{className:"text-center"},e.name),i.a.createElement("td",{className:"text-center"},e.date),i.a.createElement("td",{className:"text-center"},e.pointSystem.name),i.a.createElement("td",{className:"text-center"},i.a.createElement(d.a,null,i.a.createElement(E.a,{tag:f.b,to:"".concat(a,"/").concat(e._id),color:"primary"},"View")),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(E.a,{color:"danger",tag:f.b,to:"".concat(a,"/").concat(e._id,"/delete")},"Delete"))))}))))},N=a(296),S=a(98),x=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(r.a)(t).call(this,e))).getEvents=function(){var e=a.props,t=e.ids,n=e.events,l=a.state,s=l.rowsPerPage,r=l.page,c=l.filterBy,o=r*s,i=o-s;if("ALL"===c)return{shownEvents:t.slice(i,o).map((function(e){return n[e]})),ids:t};var m=t.filter((function(e){return n[e].pointSystem.name===c}));return{shownEvents:m.slice(i,o).map((function(e){return n[e]})),ids:m}},a.setPage=function(e){a.setState({page:e})},a.filter=function(e){a.setState({filterBy:e.target.value})},a.state={rowsPerPage:10,page:1,filterBy:"ALL"},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pointIds,a=e.points,n=e.match.path,l=this.state.rowsPerPage,s=this.getEvents(),r=s.shownEvents,c=s.ids;return i.a.createElement(S.a,null,i.a.createElement(v.Helmet,null,i.a.createElement("title",null,"Events")),i.a.createElement(u.a,null,i.a.createElement(d.a,{className:"my-2 d-flex justify-content-center align-items-center"},i.a.createElement(p.a,{xs:"9"},i.a.createElement("h1",null,"Events")),i.a.createElement(p.a,{xs:"3",className:"d-flex justify-content-end"},i.a.createElement(E.a,{color:"success",size:"md",tag:f.b,to:"".concat(n,"/add")},"Add"))),i.a.createElement(d.a,null,i.a.createElement(p.a,{xs:"12"},i.a.createElement("p",{className:"text-danger"},"Note: Past events that have expired will automatically be removed, points will be retained."))),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,{xs:"12"},i.a.createElement(g.a,{for:"filterSelect"},"Filter"),i.a.createElement(h.a,{type:"select",name:"filterSelect",id:"filterSelect",onChange:this.filter},i.a.createElement("option",{value:"ALL"},"ALL"),t.map((function(e){return i.a.createElement("option",{key:e,value:a[e].name},a[e].name)}))))),i.a.createElement(d.a,null,i.a.createElement(k,{events:r,path:n})),i.a.createElement(d.a,{className:"justify-content-center align-items-center"},i.a.createElement(N.a,{rowsPerPage:l,setPage:this.setPage,totalPosts:c.length}))))}}]),t}(o.PureComponent),P=Object(b.b)((function(e){return{ids:e.events.get("ids"),events:e.events.get("events"),pointIds:e.points.get("ids"),points:e.points.get("points")}}))(x),j=a(360),A=a(361),w=a(362),C=a(64),O=a.n(C),D=a(354),M=a(338),I=a(355),Y=a(363),V=a(275),q=a(288),F=a(292),L=a(3),R=a.n(L),B=a(99),_=a(373),z=a(357),Q=a(358),T=a(359),G=a(297),H=a.n(G),U=a(58),W=function(e){var t={};return 0===e.pioneers&&0===e.wspecs&&(t.pioneers="Must contained at least 1 in pioneers or specs",t.wspecs="Must contained at least 1 in pioneers or specs"),t},J=F.c().shape({ranks:F.a().min(1,"Require at least 1 rank select").required("required"),platoons:F.a().min(1,"Require at least 1 platoon select").required("required"),pioneers:F.b(),wspecs:F.b()}),K=function(e){var t=e.ranks,a=e.rankIds,n=e.platoons,l=e.platoonIds,s=e.statuses,r=e.statusIds,c=e.pointSystem,m=e.date,u=e.setSelectedPersonnels,v=Object(o.useState)(!1),b=Object(B.a)(v,2),f=b[0],y=b[1],k=function(){return""===m?H.a.fire({title:"Assign Date First",text:"Please assign a date first before using generate personnels",confirmButtonText:"Okay!"}):function(e){return O()(e,"DDMMYY",!0).isValid()}(m)?y(!f):H.a.fire({title:"Invalid Date Format",text:"Please make sure that your date is DDMMYY format",confirmButtonText:"Okay!"})},N=Object(o.useState)([]),S=Object(B.a)(N,2),x=S[0],P=S[1],j=Object(o.useState)([]),A=Object(B.a)(j,2),w=A[0],C=A[1],D=Object(o.useState)(!1),Y=Object(B.a)(D,2),F=Y[0],L=Y[1],G=Object(q.b)({initialValues:{ranks:[],platoons:[],onlyStatus:!1,statusNotAllowed:[],pioneers:1,wspecs:0},validationSchema:J,validate:W,onSubmit:function(e){var t,a,n,l,s,r,o,i,d,p;return R.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return L(!0),t=e.ranks,a=e.platoons,n=e.onlyStatus,l=e.statusNotAllowed,s=e.pioneers,r=e.wspecs,o={pointSystemId:c,date:O()(m,"DDMMYY",!0).format("DD-MM-YYYY"),ranks:t,platoons:a},n&&0===l.length?o.onlyStatus=!0:l.length>0&&!n&&(o.statusNotAllowed=l),s>0&&(o.pioneers=s),r>0&&(o.wspecs=r),E.prev=6,E.next=9,R.a.awrap(U.a.generateName(o));case 9:(i=E.sent).ok?(d=i.data.map((function(e){return e._id})),u(d),k()):401===i.status?C(["Unauthenticated, please refresh the page or logout"]):(p=[],i.data.message&&p.push(i.data.message),i.data.errors&&(p=w.concat(i.data.errors)),C(p)),E.next=16;break;case 13:E.prev=13,E.t0=E.catch(6),C([E.t0.message||"Unable to generate names"]);case 16:L(!1);case 17:case"end":return E.stop()}}),null,null,[[6,13]])}}),K=null;return K=F?i.a.createElement(V.a,{color:"primary"}):i.a.createElement(i.a.Fragment,null,i.a.createElement(E.a,{color:"success",onClick:G.handleSubmit,disabled:G.isSubmitting},"Generate")," ",i.a.createElement(E.a,{color:"secondary",onClick:k},"Cancel")),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(_.a,{isOpen:f,toggle:k},i.a.createElement(z.a,{toggle:k},"Generate"),i.a.createElement(Q.a,null,i.a.createElement(d.a,null,i.a.createElement(p.a,null,i.a.createElement(M.a,null,i.a.createElement(g.a,{for:"PioneersQty"},"Pioneers Qty"),i.a.createElement(h.a,{type:"number",name:"pioneers",id:"PioneersQty",value:G.values.pioneers,onChange:G.handleChange,invalid:G.touched.pioneers&&G.errors.pioneers&&""!==G.errors.pioneers,disabled:G.isSubmitting}),G.touched.pioneers&&G.errors.pioneers?i.a.createElement(I.a,null,G.errors.pioneers):null),i.a.createElement(M.a,null,i.a.createElement(g.a,{for:"WSQty"},"WSpec Qty"),i.a.createElement(h.a,{type:"number",name:"wspecs",id:"WSQty",value:G.values.wspecs,onChange:G.handleChange,invalid:G.touched.wspecs&&G.errors.wspecs&&""!==G.errors.wspecs,disabled:G.isSubmitting}),G.touched.wspecs&&G.errors.wspecs?i.a.createElement(I.a,null,G.errors.wspecs):null),i.a.createElement(M.a,null,i.a.createElement(g.a,{for:"selectPlatoons"},"Platoons"),i.a.createElement(h.a,{type:"select",name:"platoons",id:"selectPlatoons",multiple:!0,value:G.values.platoons,onChange:G.handleChange,invalid:G.touched.platoons&&G.errors.platoons&&""!==G.errors.platoons,disabled:G.isSubmitting},l.map((function(e){var t=n[e];return i.a.createElement("option",{value:e,key:e},t.name)}))),i.a.createElement(M.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",onChange:function(e){e.target.checked?G.setFieldValue("platoons",l):G.setFieldValue("platoons",[])},disabled:G.isSubmitting,checked:G.values.platoons.length===l.length})," ","All Platoons")),G.touched.platoons&&G.errors.platoons?i.a.createElement(I.a,null,G.errors.platoons):null),i.a.createElement(M.a,null,i.a.createElement(g.a,{for:"selectRanks"},"Ranks"),i.a.createElement(h.a,{type:"select",name:"ranks",id:"selectRanks",multiple:!0,value:G.values.ranks,onChange:G.handleChange,invalid:G.touched.ranks&&G.errors.ranks&&""!==G.errors.ranks,disabled:G.isSubmitting},a.map((function(e){var a=t[e];return i.a.createElement("option",{value:e,key:e},a.name)}))),i.a.createElement(M.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",onChange:function(e){e.target.checked?G.setFieldValue("ranks",a):G.setFieldValue("ranks",[])},disabled:G.isSubmitting,checked:G.values.ranks.length===a.length})," ","All Ranks")),G.touched.ranks&&G.errors.ranks?i.a.createElement(I.a,null,G.errors.ranks):null),i.a.createElement(M.a,null,i.a.createElement(g.a,{for:"selectStatuses"},"Statuses not allowed"),i.a.createElement(h.a,{type:"select",name:"statusNotAllowed",id:"selectStatuses",multiple:!0,value:G.values.statusNotAllowed,onChange:G.handleChange,disabled:G.isSubmitting},r.map((function(e){var t=s[e];return i.a.createElement("option",{value:e,key:e},t.name)})))),i.a.createElement(M.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",onChange:function(e){e.target.checked?(P(G.values.statusNotAllowed),G.setFieldValue("statusNotAllowed",r),G.values.onlyStatus&&G.setFieldValue("onlyStatus",!1)):(G.setFieldValue("statusNotAllowed",x),P([]))},disabled:G.isSubmitting,checked:G.values.statusNotAllowed.length===r.length})," ","Exclude All Status")),i.a.createElement(M.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",name:"onlyStatus",disabled:G.isSubmitting,onChange:function(e){e.target.checked?(P(G.values.statusNotAllowed),G.setFieldValue("statusNotAllowed",[]),G.setFieldValue("onlyStatus",!0)):(G.setFieldValue("statusNotAllowed",x),G.setFieldValue("onlyStatus",!1),P([]))},checked:G.values.onlyStatus})," ","Statuses Only")))),w.length>0&&i.a.createElement(d.a,null,i.a.createElement(p.a,null,w.map((function(e){return i.a.createElement("p",{className:"text-danger",key:e},e)}))))),i.a.createElement(T.a,null,K)),i.a.createElement(E.a,{color:"primary",onClick:k},"Generate Personnels")))},X=F.c().shape({name:F.d().min(3).max(50).required("Name is required"),date:F.d().required("Date is required").test("checkValidDate","Invalid date, only DDMMYY is allowed",(function(e){return O()(e,"DDMMYY",!0).isValid()})),pointSystem:F.d().required("Point System is required"),pointAllocation:F.b().min(1,"Minimum of 1 point is needed").required("Point Allocation is required"),selectedPersonnels:F.a().min(1,"At least 1 personnels is required").required("Personnel is required")}),Z=function(e){var t=e.points,a=e.pointIds,n=e.platoonIds,l=e.platoons,s=e.rankIds,r=e.ranks,c=e.statusIds,o=e.statuses,m=e.personnels,u=e.isAdding,v=e.handleSubmit,b=Object(q.b)({initialValues:{name:"",date:"",pointSystem:a[0]||"",pointAllocation:1,selectedPersonnels:[]},validationSchema:X,onSubmit:v});return i.a.createElement(D.a,{onSubmit:b.handleSubmit},i.a.createElement(d.a,null,i.a.createElement(p.a,null,i.a.createElement(M.a,null,i.a.createElement(g.a,{for:"Name"},"Name"),i.a.createElement(h.a,{type:"text",name:"name",id:"Name",placeholder:"Name of the event",onChange:b.handleChange,value:b.values.name,disabled:b.isSubmitting,invalid:b.touched.name&&b.errors.name&&""!==b.errors.name}),b.touched.name&&b.errors.name?i.a.createElement(I.a,null,b.errors.name):null),i.a.createElement(M.a,null,i.a.createElement(g.a,{for:"PointSystem"},"Point System"),i.a.createElement(h.a,{type:"select",name:"pointSystem",id:"PointSystem",value:b.values.pointSystem,disabled:b.isSubmitting,onChange:b.handleChange,invalid:b.touched.pointSystem&&b.errors.pointSystem&&""!==b.errors.pointSystem},a.map((function(e){return i.a.createElement("option",{key:e,value:e},t[e].name)}))),b.touched.pointSystem&&b.errors.pointSystem?i.a.createElement(I.a,null,b.errors.pointSystem):null),i.a.createElement(M.a,null,i.a.createElement(g.a,{for:"Date"},"Date"),i.a.createElement(h.a,{type:"text",name:"date",id:"Date",disabled:b.isSubmitting,placeholder:"e.g. ".concat(O()().tz("Asia/Singapore").format("DDMMYY")),onChange:b.handleChange,value:b.values.date,invalid:b.touched.date&&b.errors.date&&""!==b.errors.date}),b.touched.date&&b.errors.date?i.a.createElement(I.a,null,b.errors.date):null,i.a.createElement(Y.a,{color:"muted"},"Must be in DDMMYY format, it will automatically convert to DD-MM-YYYY during submission")),i.a.createElement(M.a,null,i.a.createElement(g.a,{for:"PointAllocation"},"Point Allocation"),i.a.createElement(h.a,{type:"number",name:"pointAllocation",disabled:b.isSubmitting,id:"PointAllocation",onChange:b.handleChange,value:b.values.pointAllocation,invalid:b.touched.pointAllocation&&b.errors.pointAllocation&&""!==b.errors.pointAllocation}),i.a.createElement(Y.a,{color:"muted"},"Min of 1 is needed to create event"),b.touched.pointAllocation&&b.errors.pointAllocation?i.a.createElement(I.a,null,b.errors.pointAllocation):null))),b.touched.selectedPersonnels&&b.errors.selectedPersonnels?i.a.createElement(d.a,null,i.a.createElement(p.a,null,i.a.createElement("p",{className:"text-danger"},b.errors.selectedPersonnels))):null,i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex justify-content-start align-items-center"},i.a.createElement("p",{className:"font-weight-bold"},"Total Selected: ",b.values.selectedPersonnels.length)),i.a.createElement(p.a,{className:"d-flex justify-content-end align-items-center"},i.a.createElement(K,{platoonIds:n,platoons:l,rankIds:s,ranks:r,statusIds:c,statuses:o,setSelectedPersonnels:function(e){b.setFieldValue("selectedPersonnels",e)},pointSystem:b.values.pointSystem,date:b.values.date}))),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,{className:"overflow-auto",style:{maxHeight:"150px"}},b.values.selectedPersonnels.map((function(e){var t=m[e];return i.a.createElement(d.a,{key:e},i.a.createElement(p.a,null,i.a.createElement("p",null,t.platoon.name," ",t.rank.name," ",t.name)))})))),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"text-center"},b.isSubmitting||u?i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{color:"primary"}),i.a.createElement("p",null,"Adding...")):i.a.createElement(E.a,{size:"lg",className:"w-100",color:"success",type:"submit",disabled:b.isSubmitting},"Create"))))},$=a(62),ee=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,c=new Array(l),o=0;o<l;o++)c[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(c)))).handleSubmit=function(e){var t=e.name,n=e.date,l=e.pointSystem,s=e.pointAllocation,r=e.selectedPersonnels;(0,a.props.addEvent)({name:t,date:O()(n,"DDMMYY",!0).format("DD-MM-YYYY"),pointSystemId:l,pointAllocation:s,personnels:r})},a.renderErrors=function(){var e=a.props.errors;return e.length<=0?null:i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(j.a,{color:"danger"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.isAdding,n=t.errors,l=t.history;e.isAdding&&!a&&0===n.length&&l.replace("/events")}},{key:"render",value:function(){var e=this.props,t=e.pointIds,a=e.points,n=e.personnels,l=e.rankIds,s=e.ranks,r=e.platoonIds,c=e.platoons,o=e.statusIds,m=e.statuses,E=e.isAdding,g=this.renderErrors();return i.a.createElement(S.a,null,i.a.createElement(u.a,{className:"mb-2"},i.a.createElement(d.a,{className:"mt-2"},i.a.createElement(p.a,null,i.a.createElement(A.a,{tag:"nav"},i.a.createElement(w.a,{tag:f.b,to:"/events"},"Events"),i.a.createElement(w.a,{active:!0,tag:"span"},"Add")))),g,i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement("h1",null,"Add new event"))),i.a.createElement(Z,{pointIds:t,points:a,platoonIds:r,platoons:c,rankIds:l,ranks:s,statusIds:o,statuses:m,personnels:n,isAdding:E,handleSubmit:this.handleSubmit,logout:this.logout})))}}]),t}(o.PureComponent),te={addEvent:$.a},ae=Object(b.b)((function(e){return{points:e.points.get("points"),pointIds:e.points.get("ids"),personnels:e.personnels.get("personnels"),rankIds:e.ranks.get("ids"),ranks:e.ranks.get("ranks"),platoonIds:e.platoons.get("ids"),platoons:e.platoons.get("platoons"),statusIds:e.statuses.get("ids"),statuses:e.statuses.get("statuses"),errors:e.pages.events.add.get("errors"),isAdding:e.pages.events.add.get("isAdding")}}),te)(ee),ne=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.events,a=e.personnels,n=t[e.match.params.eventId];return i.a.createElement(S.a,null,i.a.createElement(u.a,null,i.a.createElement(v.Helmet,null,i.a.createElement("title",null,"Event - Details")),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(A.a,{tag:"nav"},i.a.createElement(w.a,{tag:f.b,to:"/events"},"Events"),i.a.createElement(w.a,{active:!0,tag:"span"},"Details"),i.a.createElement(w.a,{active:!0,tag:"span"},n.name)))),i.a.createElement(d.a,{className:"my-2 justify-content-center align-items-center"},i.a.createElement(p.a,{xs:"9"},i.a.createElement("h1",null,"Details")),i.a.createElement(p.a,{xs:"3",className:"d-flex justify-content-end"},i.a.createElement(E.a,{size:"md",color:"danger",tag:f.b,to:"/events/".concat(n._id,"/delete")},"Delete"))),i.a.createElement(d.a,null,i.a.createElement(y.a,{responsive:!0,striped:!0},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Name"),i.a.createElement("td",{className:"text-center"},n.name)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Date"),i.a.createElement("td",{className:"text-center"},n.date)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Point System"),i.a.createElement("td",{className:"text-center"},n.pointSystem.name)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Points Allocation"),i.a.createElement("td",{className:"text-center"},n.pointsAllocation))))),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement("h3",null,"Personnels"))),i.a.createElement(d.a,null,i.a.createElement(y.a,{responsive:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Platoon"),i.a.createElement("th",{className:"text-center"},"Rank"),i.a.createElement("th",{className:"text-center"},"Name"))),i.a.createElement("tbody",null,n.personnels.map((function(e){var t=a[e._id];return i.a.createElement("tr",{key:t._id},i.a.createElement("td",{className:"text-center"},t.platoon.name),i.a.createElement("td",{className:"text-center"},t.rank.name),i.a.createElement("td",{className:"text-center"},t.name))})))))))}}]),t}(o.PureComponent),le=Object(b.b)((function(e){return{events:e.events.get("events"),personnels:e.personnels.get("personnels")}}))(ne),se=a(344),re=a(345),ce=a(347),oe=a(61),ie=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(r.a)(t).call(this,e))).handleRevert=function(e){var t=e.target.checked;a.setState({revert:t})},a.goBack=function(){(0,a.props.history.goBack)()},a.handleDelete=function(){var e=a.props,t=e.events,n=e.match.params.eventId,l=e.deleteEvent,s=a.state.revert;l({eventId:t[n]._id,revert:s})},a.getActionButtons=function(){return a.props.isDeleting?i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"text-center"},i.a.createElement(V.a,{size:"lg",color:"primary"}),i.a.createElement("p",null,"Deleting..."))):i.a.createElement(d.a,null,i.a.createElement(p.a,{xs:"6"},i.a.createElement(E.a,{color:"primary",size:"lg",className:"w-100",onClick:a.goBack},"Cancel")),i.a.createElement(p.a,{xs:"6"},i.a.createElement(E.a,{color:"danger",size:"lg",className:"w-100",onClick:a.handleDelete},"Confirm Delete")))},a.getAlertMessage=function(){return a.state.revert?i.a.createElement(j.a,{color:"danger"},"Removing this event will deduct points from personnels"):i.a.createElement(j.a,{color:"success"},"Removing this event will not deduct points")},a.getErrors=function(){var e=a.props.errors;return 0===e.length?null:i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(j.a,{color:"danger"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a.state={revert:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.events,a=e.match.params.eventId,n=e.isDeleting,l=this.state.revert,s=t[a]||null;if(!s)return i.a.createElement(m.a,{to:"/events"});var r=this.getErrors(),c=this.getAlertMessage(),o=this.getActionButtons();return i.a.createElement(S.a,null,i.a.createElement(u.a,null,r,i.a.createElement(d.a,{className:"mt-2"},i.a.createElement(p.a,null,i.a.createElement("h3",{className:"text-danger"},"Deleting event is irreversible!"))),i.a.createElement(d.a,{className:"my-2 mx-1"},i.a.createElement(se.a,{body:!0},i.a.createElement(re.a,{className:"text-center"},i.a.createElement("p",{className:"font-weight-bold"},"Deleting")),i.a.createElement(ce.a,null,"Name: ",s.name),i.a.createElement(ce.a,null,"Point System: ",s.pointSystem.name),i.a.createElement(ce.a,null,"Points: ",s.pointsAllocation))),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex align-items-center justify-content-center"},i.a.createElement(M.a,{check:!0},i.a.createElement(h.a,{type:"checkbox",id:"revertCheckBox",checked:l,onChange:this.handleRevert,disabled:n}),i.a.createElement(g.a,{for:"revertCheckBox"},"Revert Points")))),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex align-items-center justify-content-center"},l&&i.a.createElement("p",{className:"font-weight-bold"},"Total Affected Personnels: ",s.personnels.length))),i.a.createElement(d.a,null,i.a.createElement(p.a,null,c)),o))}}]),t}(o.PureComponent),me={deleteEvent:oe.a},ue=Object(b.b)((function(e){return{events:e.events.get("events"),isDeleting:e.pages.events.delete.get("isDeleting"),errors:e.pages.events.delete.get("errors")}}),me)(ie),de=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.match.path;return i.a.createElement(m.d,null,i.a.createElement(m.b,{exact:!0,path:e,component:P}),i.a.createElement(m.b,{exact:!0,path:"".concat(e,"/add"),component:ae}),i.a.createElement(m.b,{exact:!0,path:"".concat(e,"/:eventId/delete"),component:ue}),i.a.createElement(m.b,{exact:!0,path:"".concat(e,"/:eventId"),component:le}))}}]),t}(o.PureComponent);a.d(t,"default",(function(){return de}))}}]);
//# sourceMappingURL=9.c5121af9.chunk.js.map