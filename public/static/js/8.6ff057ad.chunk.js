(this.webpackJsonpfrontend_duty=this.webpackJsonpfrontend_duty||[]).push([[8],{262:function(e,t,a){"use strict";var n=a(28),r=a(5);t.a=function(e,t){return Object(n.c)((function(a){return"string"===typeof e?a.pages[e].get(t):e.reduce((function(e,t){return e&&"undefined"!==e[t]?e[t]:Object(r.Map)()}),a.pages).get(t)}))}},268:function(e,t,a){"use strict";var n=a(3),r=a.n(n),l=a(1),c=a(263),o=a.n(c);t.a=function(e,t){return Object(l.useCallback)((function(a,n){r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,r.a.awrap(o.a.fire({title:"Are you sure you want to delete ".concat(n,"?"),text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",reverseButtons:!0}));case 2:l.sent.value&&e(t(a));case 4:case"end":return l.stop()}}))}),[t,e])}},276:function(e,t,a){"use strict";var n=a(1),r=a.n(n),l=a(281),c=a.n(l);a(285);t.a=function(e){var t=e.rowsPerPage,a=e.totalPosts,l=e.setPage,o=Object(n.useMemo)((function(){for(var e=[],n=1;n<=Math.ceil(a/t);n+=1)e.push(n);return e}),[a,t]),s=Object(n.useCallback)((function(e){var t=e.selected;l(t+1)}),[l]);return 0===o.length?null:r.a.createElement("nav",{"aria-label":"Page pagination"},r.a.createElement(c.a,{previousLabel:"\xab",previousClassName:"page-item",previousLinkClassName:"page-link",nextLabel:"\xbb",nextClassName:"page-item",nextLinkClassName:"page-link",breakLabel:"...",breakClassName:"page-item",breakLinkClassName:"page-link",pageCount:o.length,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:s,containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"page-item active",activeLinkClassName:"page-item active",disabledClassName:"page-item disabled"}))}},285:function(e,t,a){},296:function(e,t,a){"use strict";var n=a(1);t.a=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}},315:function(e,t,a){"use strict";var n=a(1);t.a=function(){var e=Object(n.useRef)(!0);return Object(n.useEffect)((function(){return function(){e.current=!1}}),[]),e}},316:function(e,t,a){"use strict";var n=a(1),r=a(263),l=a.n(r);t.a=function(e,t){return Object(n.useCallback)((function(){return t?l.a.fire({title:"Success!",text:e,icon:"success",confirmButtonColor:"#007bff",timer:2e3,timerProgressBar:!0}):l.a.fire({title:"Success!",text:e,confirmButtonColor:"#007bff",icon:"success"})}),[e,t])}},357:function(e,t,a){},372:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(54),c=a(94),o=a(93),s=a(254),u=a(255),m=a(257),i=a(334),d=a(256),E=a(124),p=a(68),b=a.n(p),f=a(28),g=a(29),h=a(364),v=a(5);var D=Object(n.memo)((function(e){var t=e.person,a=e.handleDelete,l=t.getIn(["rank","name"]),c=t.getIn(["platoon","name"]),o=t.get("_id"),s=t.get("name"),u=Object(n.useCallback)((function(){a(o,s)}),[a,o,s]);return r.a.createElement("tr",{key:o},r.a.createElement("td",{className:"text-center"},"".concat(c," ").concat(l," ").concat(s)),r.a.createElement("td",{className:"text-center"},r.a.createElement(E.a,{color:"primary",tag:g.b,to:"/personnels/".concat(o)},"Edit")," ",r.a.createElement(E.a,{color:"danger",onClick:u},"Delete")))})),O=Object(n.memo)((function(e){var t=e.personnels,a=e.onDelete;return r.a.createElement(h.a,{striped:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center",style:{width:"50%"}},"Name"),r.a.createElement("th",{className:"text-center"},"Actions"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(D,{key:e.get("_id"),handleDelete:a,person:e})}))))})),j=a(276),k=a(360),y=a(365),C=a(362),N=a(381),S=Object(n.memo)((function(e){var t=e.search,a=e.onChange,n=e.onClear;return r.a.createElement(k.a,null,r.a.createElement(y.a,null,r.a.createElement(C.a,{placeholder:"search...",value:t,onChange:a}),""!==t&&r.a.createElement(N.a,{addonType:"append"},r.a.createElement(E.a,{color:"primary",onClick:n},"Clear"))))})),I=a(64),x=a(265),w=Object(x.a)((function(e){return e.personnels.get("ids")}),(function(e){return e.personnels.get("personnels")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),P=a(262),M=a(268);var Y=Object(n.memo)((function(){var e=Object(n.useState)(10),t=Object(o.a)(e,1)[0],a=Object(n.useState)(1),c=Object(o.a)(a,2),p=c[0],h=c[1],v=Object(n.useState)(""),D=Object(o.a)(v,2),k=D[0],y=D[1],C=Object(l.i)().path,N=Object(f.c)(w),x=Object(n.useMemo)((function(){return["personnels","all"]}),[]),Y=Object(P.a)(x,"errors"),A=Object(P.a)(x,"actionInProgress"),_=Object(f.b)(),B=Object(n.useCallback)((function(e){var t=e.target.value;y(t),1!==p&&h(1)}),[p]),z=Object(n.useCallback)((function(){y("")}),[]),U=Object(M.a)(_,I.b),L=p*t,T=L-t,q=Object(n.useMemo)((function(){if(""===k)return N.slice(T,L);var e=k.toLowerCase();return N.filter((function(t){var a=t.get("name").toLowerCase(),n=t.getIn(["platoon","name"]).toLowerCase(),r=t.getIn(["rank","name"]).toLowerCase();return a.indexOf(e)>-1||n.indexOf(e)>-1||r.indexOf(e)>-1})).slice(T,L)}),[T,L,N,k]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null,r.a.createElement("title",null,"Personnels"),"P"),r.a.createElement(s.a,{className:"py-2"},Y.size>0&&r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(i.a,{color:"danger",className:"w-100"},Y.map((function(e){return r.a.createElement("p",{className:"mb-0",key:e},e)}))))),0!==A&&r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(i.a,{color:"primary",className:"w-100"},A," action(s) in progress"," ",r.a.createElement(d.a,{color:"primary",size:"sm"})))),r.a.createElement(u.a,{className:"justify-content-center align-items-center"},r.a.createElement(m.a,{xs:"9"},r.a.createElement("h1",null,"Personnels")),r.a.createElement(m.a,{xs:"3",className:"d-flex justify-content-end"},r.a.createElement(E.a,{tag:g.b,to:"".concat(C,"/add"),color:"success",size:"md"},"Add"))),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(S,{onChange:B,onClear:z,search:k}))),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(O,{personnels:q,onDelete:U}))),r.a.createElement(u.a,{className:"justify-content-center align-items-center"},r.a.createElement(m.a,null,r.a.createElement(j.a,{rowsPerPage:t,setPage:h,totalPosts:N.size})))))})),A=a(355),_=a(356),B=a(296),z=a(315),U=a(65),L=Object(x.a)((function(e){return e.ranks.get("ids")}),(function(e){return e.ranks.get("ranks")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),T=Object(x.a)((function(e){return e.platoons.get("ids")}),(function(e){return e.platoons.get("platoons")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),q=a(359),F=a(361),R=a(363),V=a(277),J=a(290),H=J.c().shape({name:J.d().required("Name is required"),rank:J.d().required("Rank is required"),platoon:J.d().required("Platoon is required")}),G=Object(n.memo)((function(e){var t=e.handleSubmit,a=e.ranks,n=e.platoons,l=Object(V.a)({initialValues:{name:"",rank:a.has(0)?a.getIn(["0","_id"]):"",platoon:n.has(0)?n.getIn(["0","_id"]):""},validationSchema:H,onSubmit:t});return r.a.createElement(q.a,{onSubmit:l.handleSubmit},r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"nameInput"},"Name"),r.a.createElement(C.a,{type:"text",name:"name",id:"nameInput",placeholder:"John",invalid:l.touched.name&&l.errors.name&&""!==l.errors.name,value:l.values.name,onChange:l.handleChange}),l.touched.name&&l.errors.name?r.a.createElement(R.a,null,l.errors.name):null),r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"rankSelect"},"Rank"),r.a.createElement(C.a,{type:"select",name:"rank",id:"rankSelect",invalid:l.touched.rank&&l.errors.rank&&""!==l.errors.rank,onChange:l.handleChange,value:l.values.rank},a.map((function(e){return r.a.createElement("option",{value:e.get("_id"),key:e.get("_id")},e.get("name"))}))),l.touched.rank&&l.errors.rank?r.a.createElement(R.a,null,l.errors.rank):null),r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"platoonSelect"},"Platoon"),r.a.createElement(C.a,{type:"select",name:"platoon",id:"platoonSelect",invalid:l.touched.platoon&&l.errors.platoon&&""!==l.errors.platoon,onChange:l.handleChange,value:l.values.platoon},n.map((function(e){return r.a.createElement("option",{value:e.get("_id"),key:e.get("_id")},e.get("name"))}))),l.touched.platoon&&l.errors.platoon?r.a.createElement(R.a,null,l.errors.platoon):null),r.a.createElement(E.a,{color:"success",className:"w-100",disabled:l.isSubmitting,type:"submit"},"Submit"))})),K=Object(n.memo)((function(e){var t=e.name;return r.a.createElement(i.a,{color:"primary",className:"w-100"},t," in progress ",r.a.createElement(d.a,{color:"primary",size:"sm"}))}));var Q=Object(n.memo)((function(){var e=Object(l.g)(),t=Object(z.a)(),a=Object(n.useMemo)((function(){return["personnels","add"]}),[]),c=Object(P.a)(a,"actionInProgress"),o=Object(P.a)(a,"errors"),d=Object(B.a)(c),E=Object(f.c)(L),b=Object(f.c)(T),h=Object(f.b)();Object(n.useEffect)((function(){d&&!c&&0===o.size&&t.current&&e.replace("/personnels")}),[c,o.size,e,t,d]);var v=Object(n.useCallback)((function(e){var t=e.name,a=e.platoon,n=e.rank;h(Object(U.a)(t,a,n))}),[h]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Helmet,null,r.a.createElement("title",null,"Add Personnel")),r.a.createElement(s.a,{className:"py-2"},r.a.createElement(u.a,{className:"justify-content-center align-items-center"},r.a.createElement(m.a,null,r.a.createElement(A.a,{tag:"nav",listTag:"div"},r.a.createElement(_.a,{tag:g.b,to:"/personnels"},"Personnels"),r.a.createElement(_.a,{active:!0,tag:"span"},"Add")))),0===E.size||0===b.size&&r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(i.a,{color:"danger"},r.a.createElement(g.b,{to:"/ranks"},"Rank")," /"," ",r.a.createElement(g.b,{to:"/platoons"},"Platoon")," is needed to create personnels"))),o.length>0&&r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(i.a,{color:"danger",className:"w-100"},o.map((function(e){return r.a.createElement("p",{className:"mb-0",key:e},e)}))))),c&&r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(K,{name:"Adding"}))),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(G,{handleSubmit:v,platoons:b,ranks:E})))))})),W=a(367),X=a(368),Z=(a(357),a(23)),$=Object(x.a)((function(e){return e.statuses.get("ids")}),(function(e){return e.statuses.get("statuses")}),(function(e,t){return e.map((function(e){return t.get(e)}))}));function ee(e,t,a){return Object(n.useCallback)((function(n,r){e(t(a,n,r))}),[e,t,a])}var te=function(e){var t=e.name,a=e.rank,n=e.platoon,c=e.eventsDate,o=Object(l.i)().url;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{striped:!0,responsive:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Name:"),r.a.createElement("td",{className:"text-center"},t)),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Rank:"),r.a.createElement("td",{className:"text-center"},a)),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Platoon:"),r.a.createElement("td",{className:"text-center"},n)))),r.a.createElement(E.a,{tag:g.b,to:"".concat(o,"/edit"),color:"primary",className:"w-100 my-2"},"Edit Details"),r.a.createElement(h.a,{striped:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Event Dates:"))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",{className:"text-center"},e))})))))};te.defaultProps={eventsDate:Object(v.List)()};var ae=Object(n.memo)(te),ne=a(250),re=a(251),le=a(252),ce=Object(n.memo)((function(e){var t=e.setTab,a=e.activeTab;return r.a.createElement(ne.a,{tabs:!0},r.a.createElement(re.a,null,r.a.createElement(le.a,{className:"1"===a?"active":"",onClick:function(){t("1")}},"Info")),r.a.createElement(re.a,null,r.a.createElement(le.a,{className:"2"===a?"active":"",onClick:function(){t("2")}},"Status")),r.a.createElement(re.a,null,r.a.createElement(le.a,{className:"3"===a?"active":"",onClick:function(){t("3")}},"Blockout dates")),r.a.createElement(re.a,null,r.a.createElement(le.a,{className:"4"===a?"active":"",onClick:function(){t("4")}},"Points")))})),oe=a(263),se=a.n(oe);var ue=Object(n.memo)((function(e){var t=e.status,a=e.handleDelete,l=t.getIn(["statusId","name"]),c=t.get("startDate"),o=t.get("endDate"),s=Object(n.useCallback)((function(){a(t)}),[a,t]);return r.a.createElement("tr",null,r.a.createElement("th",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,o),r.a.createElement("td",null,r.a.createElement(E.a,{color:"danger",onClick:s},"Delete")))})),me=Object(n.memo)((function(e){var t,a=e.statuses,l=e.handleDelete,c=(t=l,Object(n.useCallback)((function(e){se.a.fire({title:"Are you sure?",html:'\n      <p class="font-weight-bold">You won\'t be able to revert this!</p>\n      <p>You are deleting:</p>\n      <p>'.concat(e.getIn(["statusId","name"]),"</p>\n      <p>Date: ").concat(e.get("startDate")," - ").concat(e.get("endDate"),"</p>\n      "),icon:"warning",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",confirmButtonText:"Delete"}).then((function(a){a.value&&t(e.get("_id"))}))}),[t]));return r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(h.a,{striped:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Start date"),r.a.createElement("th",null,"End date"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement(ue,{key:e.get("_id"),status:e,handleDelete:c})}))))))})),ie=a(249),de=a(335),Ee=a(366),pe=a(358),be=a(51),fe=a.n(be),ge=function(e){return fe()(e,"DDMMYY",!0).isValid()||"permanent"===e.toLowerCase()},he=fe()().tz("Asia/Singapore").format("DDMMYY"),ve=Object(n.memo)((function(e){var t=e.handleAdd,a=e.statuses,l=Object(n.useState)(!1),c=Object(o.a)(l,2),s=c[0],m=c[1],i=Object(n.useState)(a.has(0)?a.getIn(["0","_id"]):""),d=Object(o.a)(i,2),p=d[0],b=d[1],f=Object(n.useState)(he),g=Object(o.a)(f,2),h=g[0],v=g[1],D=Object(n.useState)(he),O=Object(o.a)(D,2),j=O[0],y=O[1],N=function(){m(!s),b(a.has(0)?a.getIn(["0","_id"]):""),v(he),y(he)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{className:"flex-column justify-content-end align-items-end my-2 mx-2"},r.a.createElement(E.a,{className:"my-2",color:"primary",onClick:N},"Add Status"),r.a.createElement(ie.a,{isOpen:s,className:"w-100"},r.a.createElement(de.a,null,r.a.createElement(Ee.a,null,r.a.createElement(q.a,null,r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"statusSelect"},"Status"),r.a.createElement(C.a,{type:"select",value:p,name:"select",id:"statusSelect",onChange:function(e){return b(e.target.value)}},a.map((function(e){return r.a.createElement("option",{value:e.get("_id"),key:e.get("_id")},e.get("name"))})))),r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"startDateInput"},"Start date"),r.a.createElement(C.a,{type:"text",value:h,name:"startDate",id:"startDateInput",invalid:!ge(h),onChange:function(e){return v(e.target.value)}})),r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"endDateInput"},"End date"),r.a.createElement(C.a,{type:"text",value:j,name:"endDate",id:"endDateInput",invalid:!ge(j),onChange:function(e){return y(e.target.value)}}),r.a.createElement(pe.a,{color:"muted"},"Dates must be in DDMMYY format, it will be automatically be converted to DD-MM-YYYY"),r.a.createElement(pe.a,{color:"muted"},"If permanent, please indicate permanent in end date")),r.a.createElement(E.a,{color:"success",className:"w-100",onClick:function(e){e&&e.preventDefault(),t({statusId:p,startDate:h,endDate:j}),N()},disabled:!ge(h)||!ge(j)||""===p},"Add")))))))})),De=Object(n.memo)((function(e){var t=e.personStatuses,a=e.statuses,n=e.handleAdd,l=e.handleDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve,{handleAdd:n,statuses:a}),r.a.createElement(me,{statuses:t,handleDelete:l}))}));var Oe=Object(n.memo)((function(e){var t=e.date,a=e.handleDelete,l=Object(n.useCallback)((function(){a({startDate:t})}),[t,a]);return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},t),r.a.createElement("td",{className:"text-center"},r.a.createElement(E.a,{color:"danger",onClick:l},"Delete")))})),je=Object(n.memo)((function(e){var t=e.handleDelete,a=e.blockoutDates;return r.a.createElement(h.a,{striped:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Blockout Dates:"),r.a.createElement("th",{className:"text-center"},"Action:"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement(Oe,{key:e,date:e,handleDelete:t})}))))})),ke=function(e){var t={};if(e.startDate?fe()(e.startDate,"DDMMYY",!0).isValid()||(t.startDate="Date is not in a valid format"):t.startDate="Date is required",e.endDate){var a=fe()(e.endDate,"DDMMYY",!0);a.isValid()?a.isSameOrBefore(fe()(e.startDate,"DDMMYY",!0))&&(t.endDate="Until date must be after starting date"):t.endDate="Until date is not valid format"}return t},ye=function(e){var t=e.handleAdd,a=e.handleDelete,l=Object(n.useState)(!1),c=Object(o.a)(l,2),s=c[0],m=c[1],i=Object(n.useState)(!1),d=Object(o.a)(i,2),p=d[0],b=d[1],f=Object(n.useMemo)((function(){return fe()().tz("Asia/Singapore").format("DDMMYY")}),[]),g=Object(n.useMemo)((function(){return fe()().tz("Asia/Singapore").add(1,"d").format("DDMMYY")}),[]),h=Object(n.useCallback)((function(){m((function(e){return!e})),p&&b(!1)}),[p]),v=Object(n.useCallback)((function(){b((function(e){return!e})),s&&m(!1)}),[s]),D=Object(V.a)({initialValues:{startDate:"",endDate:""},validate:ke,onSubmit:function(e,a){var n=a.resetForm;t(e),h(),n()}}),O=Object(V.a)({initialValues:{startDate:"",endDate:""},validate:ke,onSubmit:function(e,t){var n=t.resetForm;a(e),v(),n()}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{className:"justify-content-end align-items-end my-2 mx-2"},r.a.createElement(E.a,{className:"m-2",color:"primary",onClick:h},"Add Blockout"),r.a.createElement(E.a,{className:"m-2",color:"primary",onClick:v},"Delete Blockout")),r.a.createElement(u.a,null,r.a.createElement(ie.a,{isOpen:s,className:"w-100"},r.a.createElement(de.a,null,r.a.createElement(Ee.a,null,r.a.createElement(q.a,{onSubmit:D.handleSubmit},r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"addDateInput"},"Date"),r.a.createElement(C.a,{type:"text",value:D.values.startDate,name:"startDate",id:"addDateInput",placeholder:"e.g. ".concat(f),invalid:D.touched.startDate&&D.errors.startDate&&""!==D.errors.startDate,onChange:D.handleChange}),r.a.createElement(pe.a,{color:"muted"},"Date must be in DDMMYY format"),D.touched.startDate&&D.errors.startDate?r.a.createElement(R.a,null,D.errors.startDate):null),r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"addUntilDateInput"},"Until"),r.a.createElement(C.a,{type:"text",value:D.values.endDate,name:"endDate",id:"addUntilDateInput",placeholder:"*OPTIONAL* e.g. ".concat(g),invalid:D.touched.endDate&&D.errors.endDate&&""!==D.errors.endDate,onChange:D.handleChange}),r.a.createElement(pe.a,{color:"muted"},"This is optional, you can leave this blank if you want to add a single date"),D.touched.endDate&&D.errors.endDate?r.a.createElement(R.a,null,D.errors.endDate):null),r.a.createElement(E.a,{color:"success",className:"w-100",type:"submit"},"Add"))))),r.a.createElement(ie.a,{isOpen:p,className:"w-100"},r.a.createElement(de.a,null,r.a.createElement(Ee.a,null,r.a.createElement(q.a,{onSubmit:O.handleSubmit},r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"deleteDateInput"},"Date"),r.a.createElement(C.a,{type:"text",value:O.values.startDate,name:"startDate",id:"deleteDateInput",placeholder:"e.g. ".concat(f),invalid:O.touched.startDate&&O.errors.startDate&&""!==O.errors.startDate,onChange:O.handleChange}),r.a.createElement(pe.a,{color:"muted"},"Date must be in DDMMYY format"),O.touched.startDate&&O.errors.startDate?r.a.createElement(R.a,null,O.errors.startDate):null),r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"deleteUntilDateInput"},"Until"),r.a.createElement(C.a,{type:"text",value:O.values.endDate,name:"endDate",id:"deleteUntilDateInput",placeholder:"*OPTIONAL* e.g. ".concat(g),invalid:O.touched.endDate&&O.errors.endDate&&""!==O.errors.endDate,onChange:O.handleChange}),r.a.createElement(pe.a,{color:"muted"},"This is optional, you can leave this blank if you want to remove a single date"),O.touched.endDate&&O.errors.endDate?r.a.createElement(R.a,null,O.errors.endDate):null),r.a.createElement(E.a,{color:"danger",className:"w-100",type:"submit"},"Remove")))))))};function Ce(e){var t,a=e.blockoutDates,l=e.handleDelete,c=e.handleAdd,s=Object(n.useState)(5),i=Object(o.a)(s,1)[0],d=Object(n.useState)(1),E=Object(o.a)(d,2),p=E[0],b=E[1],f=(t=a,Object(n.useMemo)((function(){return t.sort((function(e,t){var a=fe()(e,"DD-MM-YYYY",!0),n=fe()(t,"DD-MM-YYYY",!0);return a.isBefore(n)?-1:a.isAfter(n)?1:0}))}),[t])),g=p*i,h=g-i,v=f.slice(h,g);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,{handleAdd:c,handleDelete:l}),0===f.length?r.a.createElement("h3",{className:"my-2"},"No blockout date for this personnel"):r.a.createElement(je,{handleDelete:l,blockoutDates:v}),r.a.createElement(u.a,null,r.a.createElement(m.a,{className:"d-flex justify-content-center align-items-center"},r.a.createElement(j.a,{currentPage:p,rowsPerPage:i,totalPosts:a.size,setPage:b}))))}Ce.defaultProps={blockoutDates:Object(v.List)()};var Ne=Object(n.memo)(Ce);var Se=Object(n.memo)((function(e){var t=e.point,a=e.handleUpdate,n=t.getIn(["pointSystem","name"]),l=t.get("points");return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},n),r.a.createElement("td",{className:"text-center"},l),r.a.createElement("td",{className:"text-center"},r.a.createElement(E.a,{color:"primary",onClick:function(){return a(t)}},"Edit")))}));var Ie=Object(n.memo)((function(e){var t,a=e.handleEdit,l=function(e){return Object(n.useMemo)((function(){return e.sort((function(e,t){var a=String(e.getIn(["pointSystem","name"])).toUpperCase(),n=String(t.getIn(["pointSystem","name"])).toUpperCase();return a<n?-1:a>n?1:0}))}),[e])}(e.points),c=(t=a,Object(n.useCallback)((function(e){se.a.fire({title:"Enter new point for ".concat(e.getIn(["pointSystem","name"])),input:"number",inputPlaceholder:e.get("points"),showCancelButton:!0,confirmButtonText:"Change",inputValidator:function(t){if(!t)return"Please enter a new number for ".concat(e.getIn(["pointSystem","name"]));var a=parseInt(t,10);return"number"!==typeof a?"Only numbers are accepted":a<0?"Only positive number is allowed inclusive of 0":null}}).then((function(a){var n=a.value;n&&t(e.get("_id"),n)}))}),[t]));return r.a.createElement(h.a,{striped:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Point System:"),r.a.createElement("th",{className:"text-center"},"Point:"),r.a.createElement("th",{className:"text-center"},"Action:"))),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement(Se,{key:e.get("_id"),handleUpdate:c,point:e})}))))}));var xe=Object(n.memo)((function(){var e=Object(l.h)().personnelId,t=Object(n.useState)("1"),a=Object(o.a)(t,2),c=a[0],d=a[1],E=Object(f.c)($),b=Object(f.c)((function(e){return e.personnels.get("personnels")})),h=Object(n.useMemo)((function(){return["personnels","single"]}),[]),v=Object(P.a)(h,"actionInProgress"),D=Object(P.a)(h,"errors"),O=Object(f.b)(),j=function(e,t,a){return Object(n.useCallback)((function(n){e(t(a,n))}),[t,e,a])}(O,Z.k,e),k=function(e,t,a){return Object(n.useCallback)((function(n){var r=n.statusId,l=n.startDate,c=n.endDate;e(t(a,r,l,c))}),[t,e,a])}(O,Z.d,e),y=function(e,t,a){return Object(n.useCallback)((function(n){var r=n.startDate,l=n.endDate,c=void 0===l?null:l,o={startDate:r};c&&(o.endDate=c),e(t(a,o))}),[t,e,a])}(O,Z.a,e),C=function(e,t,a){return Object(n.useCallback)((function(n){var r=n.startDate,l=n.endDate,c=void 0===l?null:l,o={startDate:r};c&&(o.endDate=c),e(t(a,o))}),[t,e,a])}(O,Z.h,e),N=ee(O,Z.n,e),S=b.get(e);return S&&0!==S.size?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Helmet,null,r.a.createElement("title",null,"Personnel Details")),r.a.createElement(s.a,{className:"py-2"},r.a.createElement(u.a,{className:"justify-content-center align-items-center"},r.a.createElement(m.a,null,r.a.createElement(A.a,{tag:"nav",listTag:"div"},r.a.createElement(_.a,{tag:g.b,to:"/personnels"},"Personnels"),r.a.createElement(_.a,{tag:"span"},"Details"),r.a.createElement(_.a,{active:!0,tag:"span"},S.name)))),D.size>0&&r.a.createElement(u.a,{className:"my-2 flex-column"},r.a.createElement(m.a,null,r.a.createElement(i.a,{color:"danger",className:"w-100"},D.map((function(e){return r.a.createElement("p",{className:"mb-0",key:e},e)}))))),0!==v&&r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(K,{name:"".concat(v," action(s)")}))),r.a.createElement(u.a,{className:"align-items-center"},r.a.createElement(m.a,null,r.a.createElement("h1",null,"Details"))),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement("p",{className:"text-danger"},"Note: Event dates, status and blockout dates that expired will be automatically removed"))),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(ce,{activeTab:c,setTab:d}),r.a.createElement(W.a,{activeTab:c},r.a.createElement(X.a,{tabId:"1"},r.a.createElement(ae,{name:S.get("name"),rank:S.getIn(["rank","name"]),platoon:S.getIn(["platoon","name"]),eventsDate:S.get("eventsDate")})),r.a.createElement(X.a,{tabId:"2"},r.a.createElement(De,{handleDelete:j,personStatuses:S.get("statuses"),statuses:E,handleAdd:k})),r.a.createElement(X.a,{tabId:"3"},r.a.createElement(Ne,{handleAdd:y,blockoutDates:S.get("blockOutDates"),handleDelete:C})),r.a.createElement(X.a,{tabId:"4"},r.a.createElement(Ie,{points:S.get("points"),handleEdit:N}))))))):r.a.createElement(l.a,{to:"/personnels"})})),we=a(120),Pe=Object(x.a)((function(e){return e.personnels.get("personnels")}),(function(e,t){return t}),(function(e,t){return e.get(t)})),Me=Object(x.a)((function(e){return e.ranks.get("ids")}),(function(e){return e.ranks.get("ranks")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),Ye=Object(x.a)((function(e){return e.platoons.get("ids")}),(function(e){return e.platoons.get("platoons")}),(function(e,t){return e.map((function(e){return t.get(e)}))})),Ae=J.c().shape({name:J.d().required("Name is required"),rank:J.d().required("Rank is required"),platoon:J.d().required("Platoon is required")}),_e=Object(n.memo)((function(e){var t=e.person,a=e.handleSubmit,n=e.ranks,l=e.platoons,c=e.isUpdating,o=Object(V.a)({initialValues:{name:t.get("name"),rank:t.getIn(["rank","_id"]),platoon:t.getIn(["platoon","_id"])},validationSchema:Ae,onSubmit:a});return r.a.createElement(q.a,{onSubmit:o.handleSubmit},r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"nameInput"},"Name"),r.a.createElement(C.a,{type:"text",name:"name",id:"nameInput",placeholder:"John",invalid:o.touched.name&&o.errors.name&&""!==o.errors.name,value:o.values.name,onChange:o.handleChange,disabled:c}),o.touched.name&&o.errors.name?r.a.createElement(R.a,null,o.errors.name):null),r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"rankSelect"},"Rank"),r.a.createElement(C.a,{type:"select",name:"rank",id:"rankSelect",invalid:o.touched.rank&&o.errors.rank&&""!==o.errors.rank,onChange:o.handleChange,value:o.values.rank,disabled:c},n.map((function(e){return r.a.createElement("option",{value:e.get("_id"),key:e.get("_id")},e.get("name"))}))),o.touched.rank&&o.errors.rank?r.a.createElement(R.a,null,o.errors.rank):null),r.a.createElement(k.a,null,r.a.createElement(F.a,{for:"platoonSelect"},"Platoon"),r.a.createElement(C.a,{type:"select",name:"platoon",id:"platoonSelect",disabled:c,invalid:o.touched.platoon&&o.errors.platoon&&""!==o.errors.platoon,onChange:o.handleChange,value:o.values.platoon},l.map((function(e){return r.a.createElement("option",{value:e.get("_id"),key:e.get("_id")},e.get("name"))}))),o.touched.platoon&&o.errors.platoon?r.a.createElement(R.a,null,o.errors.platoon):null),r.a.createElement(E.a,{color:"primary",type:"submit",className:"w-100",disabled:c},"Update"))})),Be=a(66),ze=a(316);var Ue=Object(n.memo)((function(){var e=Object(l.h)(),t=Object(f.c)((function(t){return Pe(t,e.personnelId)})),a=["personnels","edit"],c=Object(P.a)(a,"isUpdating"),o=Object(P.a)(a,"errors"),d=Object(B.a)(c),E=Object(f.c)(Me),b=Object(f.c)(Ye),h=Object(ze.a)("Updated!",2e3),v=Object(f.b)();Object(n.useEffect)((function(){d&&!c&&0===o.size&&h()}),[o.size,c,d,h]);var D=Object(n.useCallback)((function(t){var a=Object(we.a)({},t,{personnelId:e.personnelId});v(Object(Be.a)(a))}),[v,e.personnelId]);return t&&0!==t.size?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Helmet,null,r.a.createElement("title",null,"Edit Personnel")),r.a.createElement(s.a,{className:"py-2"},r.a.createElement(u.a,{className:"justify-content-center align-items-center"},r.a.createElement(m.a,null,r.a.createElement(A.a,{tag:"nav",listTag:"div"},r.a.createElement(_.a,{tag:g.b,to:"/personnels"},"Personnels"),r.a.createElement(_.a,{tag:"span"},"Details"),r.a.createElement(_.a,{tag:g.b,to:"/personnels/".concat(e.personnelId)},t.get("name")),r.a.createElement(_.a,{active:!0,tag:"span"},"Edit Details")))),o.size>0&&r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(i.a,{color:"danger",className:"w-100"},o.map((function(e){return r.a.createElement("p",{className:"mb-0",key:e},e)}))))),c&&r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(K,{name:"Updating"}))),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement("h1",null,"Editing ",t.get("name")))),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(_e,{handleSubmit:D,person:t,platoons:b,ranks:E,isUpdating:c}))))):r.a.createElement(l.a,{to:"/personnels"})}));var Le=Object(n.memo)((function(){var e=Object(l.i)().path;return r.a.createElement(c.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:e,component:Y}),r.a.createElement(l.b,{path:"".concat(e,"/add"),component:Q}),r.a.createElement(l.b,{path:"".concat(e,"/:personnelId"),exact:!0,component:xe}),r.a.createElement(l.b,{path:"".concat(e,"/:personnelId/edit"),component:Ue})))}));a.d(t,"default",(function(){return Le}))}}]);
//# sourceMappingURL=8.6ff057ad.chunk.js.map