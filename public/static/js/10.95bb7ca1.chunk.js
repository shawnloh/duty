(this.webpackJsonpfrontend_duty=this.webpackJsonpfrontend_duty||[]).push([[10],{296:function(e,t,a){"use strict";var n=a(1),r=a.n(n),l=a(330),s=a.n(l);t.a=function(e){var t=e.rowsPerPage,a=e.totalPosts,l=e.setPage,c=Object(n.useMemo)((function(){for(var e=[],n=1;n<=Math.ceil(a/t);n+=1)e.push(n);return e}),[a,t]);if(0===c.length)return null;return r.a.createElement("nav",{"aria-label":"Page pagination"},r.a.createElement(s.a,{previousLabel:"\xab",previousClassName:"page-item",previousLinkClassName:"page-link",nextLabel:"\xbb",nextClassName:"page-item",nextLinkClassName:"page-link",breakLabel:"...",breakClassName:"page-item",breakLinkClassName:"page-link",pageCount:c.length,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(e){var t=e.selected;l(t+1)},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"page-item active",activeLinkClassName:"page-item active",disabledClassName:"page-item disabled"}))}},364:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(22),l=a(50),s=a(49),c=a(51),o=a(1),i=a.n(o),u=a(54),m=a(98),d=a(274),p=a(360),E=a(273),g=a(275),h=a(276),f=a(132),b=a(283),v=a.n(b),D=a(44),y=a(42),k=a(356),j=function(e){var t=e.personnels,a=e.onDelete;return i.a.createElement(k.a,{striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center",style:{width:"50%"}},"Name"),i.a.createElement("th",{className:"text-center"},"Actions"))),i.a.createElement("tbody",null,t.map((function(e){var t=e.rank.name,n=e.platoon.name,r=e.name,l=e._id;return i.a.createElement("tr",{key:e._id},i.a.createElement("td",{className:"text-center"},"".concat(n," ").concat(t," ").concat(r)),i.a.createElement("td",{className:"text-center"},i.a.createElement(f.a,{color:"primary",tag:y.b,to:"/personnels/".concat(l)},"Edit")," ",i.a.createElement(f.a,{color:"danger",onClick:function(){return a(l)}},"Delete")))}))))},N=a(296),O=a(5),P=a(9),C=a(2),I=a.n(C),S=a(16),w=a.n(S),x=a(6),M={tag:x.n,size:I.a.string,className:I.a.string,cssModule:I.a.object},T=function(e){var t=e.className,a=e.cssModule,n=e.tag,r=e.size,l=Object(P.a)(e,["className","cssModule","tag","size"]),s=Object(x.j)(w()(t,"input-group",r?"input-group-"+r:null),a);return i.a.createElement(n,Object(O.a)({},l,{className:s}))};T.propTypes=M,T.defaultProps={tag:"div"};var A=T,Y=a(340),B={tag:x.n,className:I.a.string,cssModule:I.a.object},U=function(e){var t=e.className,a=e.cssModule,n=e.tag,r=Object(P.a)(e,["className","cssModule","tag"]),l=Object(x.j)(w()(t,"input-group-text"),a);return i.a.createElement(n,Object(O.a)({},r,{className:l}))};U.propTypes=B,U.defaultProps={tag:"span"};var q=U,L={tag:x.n,addonType:I.a.oneOf(["prepend","append"]).isRequired,children:I.a.node,className:I.a.string,cssModule:I.a.object},R=function(e){var t=e.className,a=e.cssModule,n=e.tag,r=e.addonType,l=e.children,s=Object(P.a)(e,["className","cssModule","tag","addonType","children"]),c=Object(x.j)(w()(t,"input-group-"+r),a);return"string"===typeof l?i.a.createElement(n,Object(O.a)({},s,{className:c}),i.a.createElement(q,{children:l})):i.a.createElement(n,Object(O.a)({},s,{className:c,children:l}))};R.propTypes=L,R.defaultProps={tag:"div"};var _=R,F=function(e){var t=e.search,a=e.onChange,n=e.onClear;return i.a.createElement(A,null,i.a.createElement(Y.a,{placeholder:"search...",value:t,onChange:a}),""!==t&&i.a.createElement(_,{addonType:"append"},i.a.createElement(f.a,{color:"primary",onClick:n},"Clear")))},z=a(373),V=a(357),J=a(358),H=a(359),G=function(e){var t=e.onCancel,a=e.onDelete,n=e.onToggle,r=e.showModal,l=e.person;return i.a.createElement(z.a,{isOpen:r,toggle:function(){return n()}},i.a.createElement(V.a,{toggle:function(){return n()}},"Action is irreversible!"),i.a.createElement(J.a,null,i.a.createElement("p",null,"Are you sure you want to delete ",l.name,"?")),i.a.createElement(H.a,null,i.a.createElement(f.a,{color:"danger",onClick:a},"Delete"),i.a.createElement(f.a,{color:"secondary",onClick:function(){return t()}},"Cancel")))},K=a(59),Q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).showErrors=function(){var e=a.props.errors;return i.a.createElement(d.a,null,e.map((function(e){return i.a.createElement(p.a,{key:e,color:"danger",className:"w-100"},e)})))},a.onChangeSearch=function(e){a.setState({search:e.target.value,page:1})},a.setPage=function(e){a.setState({page:e})},a.clearSearch=function(){a.setState({search:""})},a.getPersonnels=function(){var e=a.props,t=e.ids,n=e.personnels,r=a.state,l=r.rowsPerPage,s=r.page,c=r.search,o=s*l,i=o-l;if(""===c)return{shownPersonnels:t.slice(i,o).map((function(e){return n[e]})),ids:t};var u=t.filter((function(e){var t=n[e].name.toLowerCase(),a=n[e].platoon.name.toLowerCase(),r=n[e].rank.name.toLowerCase(),l=c.toLowerCase();return t.indexOf(l)>-1||a.indexOf(l)>-1||r.indexOf(l)>-1}));return{shownPersonnels:u.slice(i,o).map((function(e){return n[e]})),ids:u}},a.toggleDeleteModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a.setState((function(t){return{showDeleteModal:!t.showDeleteModal,selectedId:e}}))},a.handleDelete=function(){var e=a.state.selectedId;(0,a.props.removePersonnel)(e),a.toggleDeleteModal()},a.getDeleteModal=function(){var e=a.state,t=e.selectedId,n=e.showDeleteModal,r=a.props.personnels;return t?i.a.createElement(G,{onCancel:a.toggleDeleteModal,onDelete:a.handleDelete,onToggle:a.toggleDeleteModal,showModal:n,person:r[t]}):null},a.state={rowsPerPage:10,page:1,search:"",selectedId:null,showDeleteModal:!1},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.errors,a=e.actionInProgress,n=e.match.path,r=this.state,l=r.rowsPerPage,s=r.search,c=this.getPersonnels(),o=c.shownPersonnels,u=c.ids,m=this.getDeleteModal();return i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,null,i.a.createElement("title",null,"Personnels"),"P"),i.a.createElement(E.a,null,m,t.length>0&&this.showErrors(),a&&i.a.createElement(d.a,null,i.a.createElement(p.a,{color:"primary",className:"w-100"},"Action in progress ",i.a.createElement(g.a,{color:"primary",size:"sm"}))),i.a.createElement(d.a,{className:"my-2 justify-content-center align-items-center"},i.a.createElement(h.a,{xs:"9"},i.a.createElement("h1",null,"Personnels")),i.a.createElement(h.a,{xs:"3",className:"d-flex justify-content-end"},i.a.createElement(f.a,{tag:y.b,to:"".concat(n,"/add"),color:"success",size:"md"},"Add"))),i.a.createElement(d.a,{className:"my-2 mx-1"},i.a.createElement(F,{onChange:this.onChangeSearch,onClear:this.clearSearch,search:s})),i.a.createElement(d.a,null,i.a.createElement(j,{personnels:o,onDelete:this.toggleDeleteModal})),i.a.createElement(d.a,{className:"justify-content-center align-items-center"},i.a.createElement(N.a,{rowsPerPage:l,setPage:this.setPage,totalPosts:u.length}))))}}]),t}(o.PureComponent),W={removePersonnel:K.a},X=Object(D.b)((function(e){return{ids:e.personnels.get("ids"),personnels:e.personnels.get("personnels"),errors:e.pages.personnels.all.get("errors"),actionInProgress:e.pages.personnels.all.get("actionInProgress")}}),W)(Q),Z=a(361),$=a(362),ee=a(60),te=a(354),ae=a(338),ne=a(339),re=a(355),le=a(288),se=a(292),ce=se.c().shape({name:se.d().required("Name is required"),rank:se.d().required("Rank is required"),platoon:se.d().required("Platoon is required")}),oe=function(e){var t=e.handleSubmit,a=e.ranks,n=e.rankIds,r=e.platoons,l=e.platoonIds,s=Object(le.b)({initialValues:{name:"",rank:n[0]||"",platoon:l[0]||""},validationSchema:ce,onSubmit:t});return i.a.createElement(te.a,{onSubmit:s.handleSubmit},i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"nameInput"},"Name"),i.a.createElement(Y.a,{type:"text",name:"name",id:"nameInput",placeholder:"John",invalid:s.touched.name&&s.errors.name&&""!==s.errors.name,value:s.values.name,onChange:s.handleChange}),s.touched.name&&s.errors.name?i.a.createElement(re.a,null,s.errors.name):null),i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"rankSelect"},"Rank"),i.a.createElement(Y.a,{type:"select",name:"rank",id:"rankSelect",invalid:s.touched.rank&&s.errors.rank&&""!==s.errors.rank,onChange:s.handleChange,value:s.values.rank},n.map((function(e){return i.a.createElement("option",{value:e,key:e},a[e].name)}))),s.touched.rank&&s.errors.rank?i.a.createElement(re.a,null,s.errors.rank):null),i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"platoonSelect"},"Platoon"),i.a.createElement(Y.a,{type:"select",name:"platoon",id:"platoonSelect",invalid:s.touched.platoon&&s.errors.platoon&&""!==s.errors.platoon,onChange:s.handleChange,value:s.values.platoon},l.map((function(e){return i.a.createElement("option",{value:e,key:e},r[e].name)}))),s.touched.platoon&&s.errors.platoon?i.a.createElement(re.a,null,s.errors.platoon):null),i.a.createElement(f.a,{color:"success",className:"w-100",disabled:s.isSubmitting,type:"submit"},"Submit"))},ie=function(e){var t=e.name;return i.a.createElement(p.a,{color:"primary",className:"w-100"},t," in progress ",i.a.createElement(g.a,{color:"primary",size:"sm"}))},ue=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).showErrors=function(){var e=a.props.errors;return i.a.createElement(d.a,{className:"my-2 flex-column"},i.a.createElement(h.a,null,i.a.createElement(p.a,{color:"danger",className:"w-100"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a.handleSubmit=function(e){var t=e.name,n=e.platoon,r=e.rank;(0,a.props.createPersonnel)(t,n,r)},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.actionInProgress,n=t.errors,r=t.history;e.actionInProgress&&!a&&0===n.length&&r.replace("/personnels")}},{key:"render",value:function(){var e=this.props,t=e.rankIds,a=e.ranks,n=e.platoonIds,r=e.platoons,l=e.actionInProgress,s=e.errors,c=e.success,o=null;return 0!==t.length&&0!==n.length||(o=i.a.createElement(p.a,{color:"danger"},i.a.createElement(y.b,{to:"/ranks"},"Rank")," / ",i.a.createElement(y.b,{to:"/platoons"},"Platoon")," is needed to create personnels")),i.a.createElement(i.a.Fragment,null,i.a.createElement(b.Helmet,null,i.a.createElement("title",null,"Add Personnel")),i.a.createElement(E.a,null,i.a.createElement(d.a,{className:"my-2 justify-content-center align-items-center"},i.a.createElement(h.a,null,i.a.createElement(Z.a,{tag:"nav",listTag:"div"},i.a.createElement($.a,{tag:y.b,to:"/personnels"},"Personnels"),i.a.createElement($.a,{active:!0,tag:"span"},"Add")))),o&&i.a.createElement(d.a,{className:"my-2"},i.a.createElement(h.a,null,o)),s.length>0&&this.showErrors(),l&&i.a.createElement(d.a,{className:"my-2"},i.a.createElement(h.a,null,i.a.createElement(ie,{name:"Adding"}))),c&&i.a.createElement(d.a,{className:"my-2"},i.a.createElement(h.a,null,i.a.createElement(p.a,{color:"success",className:"w-100"},"Successfully added personnel"))),i.a.createElement(d.a,null,i.a.createElement(h.a,null,i.a.createElement(oe,{handleSubmit:this.handleSubmit,platoonIds:n,platoons:r,rankIds:t,ranks:a})))))}}]),t}(o.PureComponent),me={createPersonnel:ee.a},de=Object(D.b)((function(e){return{rankIds:e.ranks.get("ids"),ranks:e.ranks.get("ranks"),platoonIds:e.platoons.get("ids"),platoons:e.platoons.get("platoons"),errors:e.pages.personnels.add.get("errors"),actionInProgress:e.pages.personnels.add.get("actionInProgress"),success:e.pages.personnels.add.get("success")}}),me)(ue),pe=a(20),Ee=a(101),ge=i.a.createContext({}),he={tag:x.n,activeTab:I.a.any,className:I.a.string,cssModule:I.a.object},fe=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={activeTab:a.props.activeTab},a}return Object(pe.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null},t.prototype.render=function(){var e=this.props,t=e.className,a=e.cssModule,n=e.tag,r=Object(x.k)(this.props,Object.keys(he)),l=Object(x.j)(w()("tab-content",t),a);return i.a.createElement(ge.Provider,{value:{activeTabId:this.state.activeTab}},i.a.createElement(n,Object(O.a)({},r,{className:l})))},t}(o.Component);Object(Ee.polyfill)(fe);var be=fe;fe.propTypes=he,fe.defaultProps={tag:"div"};var ve={tag:x.n,className:I.a.string,cssModule:I.a.object,tabId:I.a.any};function De(e){var t=e.className,a=e.cssModule,n=e.tabId,r=e.tag,l=Object(P.a)(e,["className","cssModule","tabId","tag"]),s=function(e){return Object(x.j)(w()("tab-pane",t,{active:n===e}),a)};return i.a.createElement(ge.Consumer,null,(function(e){var t=e.activeTabId;return i.a.createElement(r,Object(O.a)({},l,{className:s(t)}))}))}De.propTypes=ve,De.defaultProps={tag:"div"};var ye=a(29),ke=function(e){var t=e.name,a=e.rank,n=e.platoon,r=e.eventsDate,l=Object(u.g)().url;return i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{striped:!0,responsive:!0},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Name:"),i.a.createElement("td",{className:"text-center"},t)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Rank:"),i.a.createElement("td",{className:"text-center"},a.name)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Platoon:"),i.a.createElement("td",{className:"text-center"},n.name)))),i.a.createElement(f.a,{tag:y.b,to:"".concat(l,"/edit"),color:"primary",className:"w-100 my-2"},"Edit Details"),i.a.createElement(k.a,{striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Event Dates:"))),i.a.createElement("tbody",null,r.map((function(e){return i.a.createElement("tr",{key:e},i.a.createElement("td",{className:"text-center"},e))})))))};ke.defaultProps={eventsDate:[]};var je=ke,Ne=a(269),Oe=a(270),Pe=a(271),Ce=function(e){var t=e.setTab,a=e.activeTab;return i.a.createElement(Ne.a,{tabs:!0},i.a.createElement(Oe.a,null,i.a.createElement(Pe.a,{className:"1"===a?"active":"",onClick:function(){t("1")}},"Info")),i.a.createElement(Oe.a,null,i.a.createElement(Pe.a,{className:"2"===a?"active":"",onClick:function(){t("2")}},"Status")),i.a.createElement(Oe.a,null,i.a.createElement(Pe.a,{className:"3"===a?"active":"",onClick:function(){t("3")}},"Blockout dates")),i.a.createElement(Oe.a,null,i.a.createElement(Pe.a,{className:"4"===a?"active":"",onClick:function(){t("4")}},"Points")))},Ie=a(3),Se=a.n(Ie),we=a(297),xe=a.n(we),Me=function(e){var t=e.statuses,a=e.handleDelete;return i.a.createElement(d.a,null,i.a.createElement(h.a,null,i.a.createElement(k.a,{striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Status"),i.a.createElement("th",null,"Start date"),i.a.createElement("th",null,"End date"),i.a.createElement("th",null,"Actions"))),i.a.createElement("tbody",null,t.map((function(e){return i.a.createElement("tr",{key:e._id},i.a.createElement("th",null,e.statusId.name),i.a.createElement("td",null,e.startDate),i.a.createElement("td",null,e.endDate),i.a.createElement("td",null,i.a.createElement(f.a,{color:"danger",onClick:function(){!function(e,t){var a;Se.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Se.a.awrap(xe.a.fire({title:"Are you sure?",html:'\n      <p class="font-weight-bold">You won\'t be able to revert this!</p>\n      <p>You are deleting:</p>\n      <p>'.concat(e.statusId.name,"</p>\n      <p>Date: ").concat(e.startDate," - ").concat(e.endDate,"</p>\n      "),icon:"warning",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",confirmButtonText:"Delete"}));case 2:a=n.sent,a.value&&t(e._id);case 5:case"end":return n.stop()}}))}(e,a)}},"Delete")))}))))))},Te=a(99),Ae=a(268),Ye=a(344),Be={tag:x.n,className:I.a.string,cssModule:I.a.object,innerRef:I.a.oneOfType([I.a.object,I.a.string,I.a.func])},Ue=function(e){var t=e.className,a=e.cssModule,n=e.innerRef,r=e.tag,l=Object(P.a)(e,["className","cssModule","innerRef","tag"]),s=Object(x.j)(w()(t,"card-body"),a);return i.a.createElement(r,Object(O.a)({},l,{className:s,ref:n}))};Ue.propTypes=Be,Ue.defaultProps={tag:"div"};var qe=Ue,Le=a(363),Re=a(64),_e=a.n(Re),Fe=function(e){return _e()(e,"DDMMYY",!0).isValid()||"permanent"===e.toLowerCase()},ze=function(e){var t=e.handleAdd,a=e.statuses,n=e.statusIds,r=_e()().tz("Asia/Singapore").format("DDMMYY"),l=Object(o.useState)(!1),s=Object(Te.a)(l,2),c=s[0],u=s[1],m=Object(o.useState)(n[0]||""),p=Object(Te.a)(m,2),E=p[0],g=p[1],h=Object(o.useState)(r),b=Object(Te.a)(h,2),v=b[0],D=b[1],y=Object(o.useState)(r),k=Object(Te.a)(y,2),j=k[0],N=k[1],O=function(){u(!c),g(n[0]||""),D(r),N(r)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{className:"flex-column justify-content-end align-items-end my-2 mx-2"},i.a.createElement(f.a,{className:"my-2",color:"primary",onClick:O},"Add Status"),i.a.createElement(Ae.a,{isOpen:c,className:"w-100"},i.a.createElement(Ye.a,null,i.a.createElement(qe,null,i.a.createElement(te.a,null,i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"statusSelect"},"Status"),i.a.createElement(Y.a,{type:"select",value:E,name:"select",id:"statusSelect",onChange:function(e){return g(e.target.value)}},n.map((function(e){return i.a.createElement("option",{value:e,key:e},a[e].name)})))),i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"startDateInput"},"Start date"),i.a.createElement(Y.a,{type:"text",value:v,name:"startDate",id:"startDateInput",invalid:!Fe(v),onChange:function(e){return D(e.target.value)}})),i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"endDateInput"},"End date"),i.a.createElement(Y.a,{type:"text",value:j,name:"endDate",id:"endDateInput",invalid:!Fe(j),onChange:function(e){return N(e.target.value)}}),i.a.createElement(Le.a,{color:"muted"},"Dates must be in DDMMYY format, it will be automatically be converted to DD-MM-YYYY"),i.a.createElement(Le.a,{color:"muted"},"If permanent, please indicate permanent in end date")),i.a.createElement(f.a,{color:"success",className:"w-100",onClick:function(e){e&&e.preventDefault(),t({statusId:E,startDate:v,endDate:j}),O()},disabled:!Fe(v)||!Fe(j)||""===E},"Add")))))))},Ve=function(e){var t=e.personStatuses,a=e.statuses,n=e.statusIds,r=e.handleAdd,l=e.handleDelete;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ze,{handleAdd:r,statusIds:n,statuses:a}),i.a.createElement(Me,{statuses:t,handleDelete:l}))},Je=function(e){var t=e.handleDelete,a=e.blockoutDates;return i.a.createElement(k.a,{striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Blockout Dates:"),i.a.createElement("th",{className:"text-center"},"Action:"))),i.a.createElement("tbody",null,a.map((function(e){return i.a.createElement("tr",{key:e},i.a.createElement("td",{className:"text-center"},e),i.a.createElement("td",{className:"text-center"},i.a.createElement(f.a,{color:"danger",onClick:function(){return t(e)}},"Delete")))}))))},He=function(e){var t={};if(e.startDate?_e()(e.startDate,"DDMMYY",!0).isValid()||(t.startDate="Date is not in a valid format"):t.startDate="Date is required",e.endDate){var a=_e()(e.endDate,"DDMMYY",!0);a.isValid()?a.isSameOrBefore(_e()(e.startDate,"DDMMYY",!0))&&(t.endDate="Until date must be after starting date"):t.endDate="Until date is not valid format"}return t},Ge=function(e){var t=e.handleAdd,a=Object(o.useState)(!1),n=Object(Te.a)(a,2),r=n[0],l=n[1],s=function(){l(!r)},c=Object(le.b)({initialValues:{startDate:"",endDate:""},validate:He,onSubmit:function(e,a){var n=a.resetForm;t(e),n(),s()}}),u=_e()().tz("Asia/Singapore").format("DDMMYY");return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{className:"flex-column justify-content-end align-items-end my-2 mx-2"},i.a.createElement(f.a,{className:"my-2",color:"primary",onClick:s},"Add Blockout"),i.a.createElement(Ae.a,{isOpen:r,className:"w-100"},i.a.createElement(Ye.a,null,i.a.createElement(qe,null,i.a.createElement(te.a,{onSubmit:c.handleSubmit},i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"dateInput"},"Date"),i.a.createElement(Y.a,{type:"text",value:c.values.startDate,name:"startDate",id:"dateInput",placeholder:"e.g. ".concat(u),invalid:c.touched.startDate&&c.errors.startDate&&""!==c.errors.startDate,onChange:c.handleChange}),i.a.createElement(Le.a,{color:"muted"},"Date must be in DDMMYY format"),c.touched.startDate&&c.errors.startDate?i.a.createElement(re.a,null,c.errors.startDate):null),i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"untilDateInput"},"Until"),i.a.createElement(Y.a,{type:"text",value:c.values.endDate,name:"endDate",id:"untilDateInput",placeholder:"*OPTIONAL* e.g. ".concat(u),invalid:c.touched.endDate&&c.errors.endDate&&""!==c.errors.endDate,onChange:c.handleChange}),i.a.createElement(Le.a,{color:"muted"},"This is optional, you can leave this blank if you want to add a single date"),c.touched.endDate&&c.errors.endDate?i.a.createElement(re.a,null,c.errors.endDate):null),i.a.createElement(f.a,{color:"success",className:"w-100",type:"submit"},"Add")))))))};function Ke(e){var t=e.blockoutDates,a=e.handleDelete,n=e.handleAdd,r=Object(o.useState)(5),l=Object(Te.a)(r,1)[0],s=Object(o.useState)(1),c=Object(Te.a)(s,2),u=c[0],m=c[1],p=Object(o.useMemo)((function(){var e=t;return e.sort((function(e,t){var a=_e()(e,"DD-MM-YYYY",!0),n=_e()(t,"DD-MM-YYYY",!0);return a.isBefore(n)?-1:a.isAfter(n)?1:0})),e}),[t]),E=u*l,g=E-l,f=p.slice(g,E);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ge,{handleAdd:n}),0===p.length?i.a.createElement("h3",{className:"my-2"},"No blockout date for this personnel"):i.a.createElement(Je,{handleDelete:a,blockoutDates:f}),i.a.createElement(d.a,null,i.a.createElement(h.a,{className:"d-flex justify-content-center align-items-center"},i.a.createElement(N.a,{currentPage:u,rowsPerPage:l,totalPosts:t.length,setPage:m}))))}Ke.defaultProps={blockoutDates:[]};var Qe=Ke,We=function(e){var t=e.handleEdit,a=e.points,n=Object(o.useMemo)((function(){var e=a;return e.sort((function(e,t){var a=String(e.pointSystem.name).toUpperCase(),n=String(t.pointSystem.name).toUpperCase();return a<n?-1:a>n?1:0})),e}),[a]);return i.a.createElement(k.a,{striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Point System:"),i.a.createElement("th",{className:"text-center"},"Point:"),i.a.createElement("th",{className:"text-center"},"Action:"))),i.a.createElement("tbody",null,n.map((function(e){return i.a.createElement("tr",{key:e._id},i.a.createElement("td",{className:"text-center"},e.pointSystem.name),i.a.createElement("td",{className:"text-center"},e.points),i.a.createElement("td",{className:"text-center"},i.a.createElement(f.a,{color:"primary",onClick:function(){return function(e,t,a,n){var r,l;return Se.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Se.a.awrap(xe.a.fire({title:"Enter new point for ".concat(t),input:"number",inputPlaceholder:a,showCancelButton:!0,confirmButtonText:"Change",inputValidator:function(e){if(!e)return"Please enter a new number for ".concat(t);var a=parseInt(e,10);return"number"!==typeof a?"Only numbers are accepted":a<0?"Only positive number is allowed inclusive of 0":null}}));case 2:r=s.sent,(l=r.value)&&n(e,l);case 5:case"end":return s.stop()}}))}(e._id,e.pointSystem.name,e.points,t)}},"Edit")))}))))},Xe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).setTab=function(e){e!==a.state.activeTab&&a.setState({activeTab:e})},a.handleDeleteStatus=function(e){var t=a.props;(0,t.deletePersonnelStatus)(t.match.params.personnelId,e)},a.handleAddStatus=function(e){var t=e.statusId,n=e.startDate,r=e.endDate,l=a.props,s=l.match.params.personnelId;(0,l.addPersonnelStatus)(s,t,n,r)},a.handleAddBlockoutDate=function(e){var t=e.startDate,n=e.endDate,r=a.props,l=r.match.params.personnelId,s=r.addBlockoutDate,c={startDate:t};n&&(c.endDate=n),s(l,c)},a.handleDeleteBlockoutDate=function(e){var t=a.props,n=t.match.params.personnelId;(0,t.deleteBlockoutDate)(n,e)},a.handleEditPoint=function(e,t){var n=a.props,r=n.match.params.personnelId;(0,n.editPoint)(r,e,t)},a.showErrors=function(){var e=a.props.errors;return i.a.createElement(d.a,{className:"my-2 flex-column"},i.a.createElement(h.a,null,i.a.createElement(p.a,{color:"danger",className:"w-100"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a.state={activeTab:"1"},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.match.params.personnelId,a=e.personnels,n=e.statuses,r=e.statusIds,l=e.actionInProgress,s=e.errors,c=this.state.activeTab,o=a[t];return o?i.a.createElement(E.a,null,i.a.createElement(d.a,{className:"my-2 justify-content-center align-items-center"},i.a.createElement(h.a,null,i.a.createElement(Z.a,{tag:"nav",listTag:"div"},i.a.createElement($.a,{tag:y.b,to:"/personnels"},"Personnels"),i.a.createElement($.a,{tag:"span"},"Details"),i.a.createElement($.a,{active:!0,tag:"span"},o.name)))),s.length>0&&this.showErrors(),l&&i.a.createElement(ie,{name:"Action"}),i.a.createElement(d.a,{className:"my-2 align-items-center"},i.a.createElement(h.a,null,i.a.createElement("h1",null,"Details"))),i.a.createElement(d.a,null,i.a.createElement(h.a,null,i.a.createElement("p",{className:"text-danger"},"Note: Event dates, status and blockout dates that expired will be automatically removed"))),i.a.createElement(Ce,{activeTab:c,setTab:this.setTab}),i.a.createElement(be,{activeTab:c},i.a.createElement(De,{tabId:"1"},i.a.createElement(je,{name:o.name,rank:o.rank,platoon:o.platoon,eventsDate:o.eventsDate||["None"]})),i.a.createElement(De,{tabId:"2"},i.a.createElement(Ve,{handleDelete:this.handleDeleteStatus,personStatuses:o.statuses,statusIds:r,statuses:n,handleAdd:this.handleAddStatus})),i.a.createElement(De,{tabId:"3"},i.a.createElement(Qe,{handleAdd:this.handleAddBlockoutDate,blockoutDates:o.blockOutDates,handleDelete:this.handleDeleteBlockoutDate})),i.a.createElement(De,{tabId:"4"},i.a.createElement(We,{points:o.points,handleEdit:this.handleEditPoint})))):i.a.createElement(u.a,{to:"/personnels"})}}]),t}(o.PureComponent),Ze={addPersonnelStatus:ye.d,deletePersonnelStatus:ye.k,addBlockoutDate:ye.a,deleteBlockoutDate:ye.h,editPoint:ye.n},$e=Object(D.b)((function(e){return{personnels:e.personnels.get("personnels"),statuses:e.statuses.get("statuses"),statusIds:e.statuses.get("ids"),actionInProgress:e.pages.personnels.single.get("actionInProgress"),errors:e.pages.personnels.single.get("errors")}}),Ze)(Xe),et=a(103);function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var at=se.c().shape({name:se.d().required("Name is required"),rank:se.d().required("Rank is required"),platoon:se.d().required("Platoon is required")}),nt=function(e){var t=e.person,a=e.handleSubmit,n=e.rankIds,r=e.ranks,l=e.platoonIds,s=e.platoons,c=e.isUpdating,o=Object(le.b)({initialValues:{name:t.name,rank:t.rank._id,platoon:t.platoon._id},validationSchema:at,onSubmit:a});return i.a.createElement(te.a,{onSubmit:o.handleSubmit},i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"nameInput"},"Name"),i.a.createElement(Y.a,{type:"text",name:"name",id:"nameInput",placeholder:"John",invalid:o.touched.name&&o.errors.name&&""!==o.errors.name,value:o.values.name,onChange:o.handleChange,disabled:c}),o.touched.name&&o.errors.name?i.a.createElement(re.a,null,o.errors.name):null),i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"rankSelect"},"Rank"),i.a.createElement(Y.a,{type:"select",name:"rank",id:"rankSelect",invalid:o.touched.rank&&o.errors.rank&&""!==o.errors.rank,onChange:o.handleChange,value:o.values.rank,disabled:c},n.map((function(e){return i.a.createElement("option",{value:e,key:e},r[e].name)}))),o.touched.rank&&o.errors.rank?i.a.createElement(re.a,null,o.errors.rank):null),i.a.createElement(ae.a,null,i.a.createElement(ne.a,{for:"platoonSelect"},"Platoon"),i.a.createElement(Y.a,{type:"select",name:"platoon",id:"platoonSelect",disabled:c,invalid:o.touched.platoon&&o.errors.platoon&&""!==o.errors.platoon,onChange:o.handleChange,value:o.values.platoon},l.map((function(e){return i.a.createElement("option",{value:e,key:e},s[e].name)}))),o.touched.platoon&&o.errors.platoon?i.a.createElement(re.a,null,o.errors.platoon):null),i.a.createElement(f.a,{color:"primary",type:"submit",className:"w-100",disabled:c},"Update"))},rt=a(70),lt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).handleEdit=function(e){var t=a.props,n=t.match.params.personnelId;(0,t.updateDetails)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(a),!0).forEach((function(t){Object(et.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{personnelId:n}))},a.renderErrors=function(){var e=a.props.errors;return i.a.createElement(d.a,{className:"my-2 flex-column"},i.a.createElement(h.a,null,i.a.createElement(p.a,{color:"danger",className:"w-100"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.isUpdating,n=t.errors;e.isUpdating&&!a&&0===n.length&&xe.a.fire({title:"Updated!",text:"Successfully Updated!",icon:"success",timer:2e3})}},{key:"render",value:function(){var e=this.props,t=e.match.params.personnelId,a=e.personnels,n=e.platoons,r=e.platoonIds,l=e.ranks,s=e.rankIds,c=e.errors,o=e.isUpdating,m=a[t];return m?i.a.createElement(E.a,null,i.a.createElement(d.a,{className:"my-2 justify-content-center align-items-center"},i.a.createElement(h.a,null,i.a.createElement(Z.a,{tag:"nav",listTag:"div"},i.a.createElement($.a,{tag:y.b,to:"/personnels"},"Personnels"),i.a.createElement($.a,{tag:"span"},"Details"),i.a.createElement($.a,{tag:y.b,to:"/personnels/".concat(t)},m.name),i.a.createElement($.a,{active:!0,tag:"span"},"Edit Details")))),c.length>0&&this.renderErrors(),o&&i.a.createElement(ie,{name:"Updating"}),i.a.createElement(d.a,null,i.a.createElement(h.a,null,i.a.createElement("h1",null,"Editing ",m.name))),i.a.createElement(d.a,null,i.a.createElement(h.a,null,i.a.createElement(nt,{handleSubmit:this.handleEdit,person:m,platoonIds:r,platoons:n,rankIds:s,ranks:l,isUpdating:o})))):i.a.createElement(u.a,{to:"/personnels"})}}]),t}(o.PureComponent),st={updateDetails:rt.a},ct=Object(D.b)((function(e){return{isUpdating:e.pages.personnels.edit.get("isUpdating"),errors:e.pages.personnels.edit.get("errors"),personnels:e.personnels.get("personnels"),rankIds:e.ranks.get("ids"),ranks:e.ranks.get("ranks"),platoonIds:e.platoons.get("ids"),platoons:e.platoons.get("platoons")}}),st)(lt),ot=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.match.path;return i.a.createElement(m.a,null,i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:e,component:X}),i.a.createElement(u.b,{path:"".concat(e,"/add"),component:de}),i.a.createElement(u.b,{path:"".concat(e,"/:personnelId"),exact:!0,component:$e}),i.a.createElement(u.b,{path:"".concat(e,"/:personnelId/edit"),component:ct})))}}]),t}(o.PureComponent);a.d(t,"default",(function(){return ot}))}}]);
//# sourceMappingURL=10.95bb7ca1.chunk.js.map