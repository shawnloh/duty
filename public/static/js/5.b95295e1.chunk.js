(this.webpackJsonpfrontend_duty=this.webpackJsonpfrontend_duty||[]).push([[5],{280:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(25),s=a(20),c=a(1),o=a.n(c),i=a(2),m=a.n(i),u=a(15),d=a.n(u),p=a(6),E={children:m.a.node,inline:m.a.bool,tag:p.n,innerRef:m.a.oneOfType([m.a.object,m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},g=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(r.a)(a)),a.submit=a.submit.bind(Object(r.a)(a)),a}Object(s.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.submit=function(){this.ref&&this.ref.submit()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,r=e.inline,s=e.tag,c=e.innerRef,i=Object(l.a)(e,["className","cssModule","inline","tag","innerRef"]),m=Object(p.j)(d()(t,!!r&&"form-inline"),a);return o.a.createElement(s,Object(n.a)({},i,{ref:c,className:m}))},t}(c.Component);g.propTypes=E,g.defaultProps={tag:"form"},t.a=g},282:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(15),m=a.n(i),u=a(6),d={tag:u.n,inverse:o.a.bool,color:o.a.string,body:o.a.bool,outline:o.a.bool,className:o.a.string,cssModule:o.a.object,innerRef:o.a.oneOfType([o.a.object,o.a.string,o.a.func])},p=function(e){var t=e.className,a=e.cssModule,r=e.color,c=e.body,o=e.inverse,i=e.outline,d=e.tag,p=e.innerRef,E=Object(l.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),g=Object(u.j)(m()(t,"card",!!o&&"text-white",!!c&&"card-body",!!r&&(i?"border":"bg")+"-"+r),a);return s.a.createElement(d,Object(n.a)({},E,{className:g,ref:p}))};p.propTypes=d,p.defaultProps={tag:"div"},t.a=p},291:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(15),m=a.n(i),u=a(6),d={tag:u.n,className:o.a.string,cssModule:o.a.object},p=function(e){var t=e.className,a=e.cssModule,r=e.tag,c=Object(l.a)(e,["className","cssModule","tag"]),o=Object(u.j)(m()(t,"card-title"),a);return s.a.createElement(r,Object(n.a)({},c,{className:o}))};p.propTypes=d,p.defaultProps={tag:"div"},t.a=p},293:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(15),m=a.n(i),u=a(6),d={tag:u.n,className:o.a.string,cssModule:o.a.object},p=function(e){var t=e.className,a=e.cssModule,r=e.tag,c=Object(l.a)(e,["className","cssModule","tag"]),o=Object(u.j)(m()(t,"card-text"),a);return s.a.createElement(r,Object(n.a)({},c,{className:o}))};p.propTypes=d,p.defaultProps={tag:"p"},t.a=p},297:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(15),m=a.n(i),u=a(6),d={children:o.a.node,className:o.a.string,listClassName:o.a.string,cssModule:o.a.object,size:o.a.string,tag:u.n,listTag:u.n,"aria-label":o.a.string},p=function(e){var t,a=e.className,r=e.listClassName,c=e.cssModule,o=e.size,i=e.tag,d=e.listTag,p=e["aria-label"],E=Object(l.a)(e,["className","listClassName","cssModule","size","tag","listTag","aria-label"]),g=Object(u.j)(m()(a),c),v=Object(u.j)(m()(r,"pagination",((t={})["pagination-"+o]=!!o,t)),c);return s.a.createElement(i,{className:g,"aria-label":p},s.a.createElement(d,Object(n.a)({},E,{className:v})))};p.propTypes=d,p.defaultProps={tag:"nav",listTag:"ul","aria-label":"pagination"},t.a=p},298:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(15),m=a.n(i),u=a(6),d={active:o.a.bool,children:o.a.node,className:o.a.string,cssModule:o.a.object,disabled:o.a.bool,tag:u.n},p=function(e){var t=e.active,a=e.className,r=e.cssModule,c=e.disabled,o=e.tag,i=Object(l.a)(e,["active","className","cssModule","disabled","tag"]),d=Object(u.j)(m()(a,"page-item",{active:t,disabled:c}),r);return s.a.createElement(o,Object(n.a)({},i,{className:d}))};p.propTypes=d,p.defaultProps={tag:"li"},t.a=p},299:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(15),m=a.n(i),u=a(6),d={"aria-label":o.a.string,children:o.a.node,className:o.a.string,cssModule:o.a.object,next:o.a.bool,previous:o.a.bool,first:o.a.bool,last:o.a.bool,tag:u.n},p=function(e){var t,a=e.className,r=e.cssModule,c=e.next,o=e.previous,i=e.first,d=e.last,p=e.tag,E=Object(l.a)(e,["className","cssModule","next","previous","first","last","tag"]),g=Object(u.j)(m()(a,"page-link"),r);o?t="Previous":c?t="Next":i?t="First":d&&(t="Last");var v,h=e["aria-label"]||t;o?v="\u2039":c?v="\u203a":i?v="\xab":d&&(v="\xbb");var f=e.children;return f&&Array.isArray(f)&&0===f.length&&(f=null),E.href||"a"!==p||(p="button"),(o||c||i||d)&&(f=[s.a.createElement("span",{"aria-hidden":"true",key:"caret"},f||v),s.a.createElement("span",{className:"sr-only",key:"sr"},h)]),s.a.createElement(p,Object(n.a)({},E,{className:g,"aria-label":h}),f)};p.propTypes=d,p.defaultProps={tag:"a"},t.a=p},300:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(15),m=a.n(i),u=a(6),d={tag:u.n,listTag:u.n,className:o.a.string,listClassName:o.a.string,cssModule:o.a.object,children:o.a.node,"aria-label":o.a.string},p=function(e){var t=e.className,a=e.listClassName,r=e.cssModule,c=e.children,o=e.tag,i=e.listTag,d=e["aria-label"],p=Object(l.a)(e,["className","listClassName","cssModule","children","tag","listTag","aria-label"]),E=Object(u.j)(m()(t),r),g=Object(u.j)(m()("breadcrumb",a),r);return s.a.createElement(o,Object(n.a)({},p,{className:E,"aria-label":d}),s.a.createElement(i,{className:g},c))};p.propTypes=d,p.defaultProps={tag:"nav",listTag:"ol","aria-label":"breadcrumb"},t.a=p},301:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(15),m=a.n(i),u=a(6),d={tag:u.n,active:o.a.bool,className:o.a.string,cssModule:o.a.object},p=function(e){var t=e.className,a=e.cssModule,r=e.active,c=e.tag,o=Object(l.a)(e,["className","cssModule","active","tag"]),i=Object(u.j)(m()(t,!!r&&"active","breadcrumb-item"),a);return s.a.createElement(c,Object(n.a)({},o,{className:i,"aria-current":r?"page":void 0}))};p.propTypes=d,p.defaultProps={tag:"li"},t.a=p},302:function(e,t,a){"use strict";var n=a(5),l=a(9),r=a(1),s=a.n(r),c=a(2),o=a.n(c),i=a(15),m=a.n(i),u=a(6),d={children:o.a.node,inline:o.a.bool,tag:u.n,color:o.a.string,className:o.a.string,cssModule:o.a.object},p=function(e){var t=e.className,a=e.cssModule,r=e.inline,c=e.color,o=e.tag,i=Object(l.a)(e,["className","cssModule","inline","color","tag"]),d=Object(u.j)(m()(t,!r&&"form-text",!!c&&"text-"+c),a);return s.a.createElement(o,Object(n.a)({},i,{className:d}))};p.propTypes=d,p.defaultProps={tag:"small",color:"muted"},t.a=p},309:function(e,t,a){"use strict";a.r(t);var n=a(21),l=a(22),r=a(49),s=a(48),c=a(50),o=a(1),i=a.n(o),m=a(53),u=a(271),d=a(272),p=a(274),E=a(130),g=a(285),v=a(286),h=a(278),f=a(43),b=a(41),y=a(303),N=function(e){var t=e.events,a=e.path;return 0===t.length?i.a.createElement(d.a,{className:"my-2 mx-2"},"No events available"):i.a.createElement(y.a,{striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Name"),i.a.createElement("th",{className:"text-center"},"Date"),i.a.createElement("th",{className:"text-center"},"Point System"),i.a.createElement("th",{className:"text-center"},"Actions"))),i.a.createElement("tbody",null,t.map((function(e){return i.a.createElement("tr",{key:e._id},i.a.createElement("td",{className:"text-center"},e.name),i.a.createElement("td",{className:"text-center"},e.date),i.a.createElement("td",{className:"text-center"},e.pointSystem.name),i.a.createElement("td",{className:"text-center"},i.a.createElement(d.a,null,i.a.createElement(E.a,{tag:b.b,to:"".concat(a,"/").concat(e._id),color:"primary"},"View")),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(E.a,{color:"danger",tag:b.b,to:"".concat(a,"/").concat(e._id,"/delete")},"Delete"))))}))))},j=a(297),k=a(298),O=a(299),x=function(e){var t=e.rowsPerPage,a=e.totalPosts,n=e.currentPage,l=e.setPage,r=Object(o.useMemo)((function(){for(var e=[],n=1;n<=Math.ceil(a/t);n+=1)e.push(n);return e}),[a,t]);return 0===r.length?null:i.a.createElement(j.a,{"aria-label":"Events Pagination"},i.a.createElement(k.a,{disabled:1===n},i.a.createElement(O.a,{first:!0,onClick:function(){return l(1)}})),i.a.createElement(k.a,{disabled:1===n},i.a.createElement(O.a,{previous:!0,onClick:function(){return l(n-1)}})),r.map((function(e){return i.a.createElement(k.a,{active:n===e,key:e},i.a.createElement(O.a,{onClick:function(){return l(e)}},e))})),i.a.createElement(k.a,{disabled:n===r[r.length-1]},i.a.createElement(O.a,{next:!0,onClick:function(){return l(n+1)}})),i.a.createElement(k.a,{disabled:n===r[r.length-1]},i.a.createElement(O.a,{last:!0,onClick:function(){return l(r[r.length-1])}})))},P=a(96),S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).getEvents=function(){var e=a.props,t=e.ids,n=e.events,l=a.state,r=l.rowsPerPage,s=l.page,c=l.filterBy,o=s*r,i=o-r;if("ALL"===c)return{shownEvents:t.slice(i,o).map((function(e){return n[e]})),ids:t};var m=t.filter((function(e){return n[e].pointSystem.name===c}));return{shownEvents:m.slice(i,o).map((function(e){return n[e]})),ids:m}},a.setPage=function(e){a.setState({page:e})},a.filter=function(e){a.setState({filterBy:e.target.value})},a.state={rowsPerPage:10,page:1,filterBy:"ALL"},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pointIds,a=e.points,n=e.match.path,l=this.state,r=l.rowsPerPage,s=l.page,c=this.getEvents(),o=c.shownEvents,m=c.ids;return i.a.createElement(P.a,null,i.a.createElement(h.Helmet,null,i.a.createElement("title",null,"Events")),i.a.createElement(u.a,null,i.a.createElement(d.a,{className:"my-2 d-flex justify-content-center align-items-center"},i.a.createElement(p.a,{xs:"9"},i.a.createElement("h1",null,"Events")),i.a.createElement(p.a,{xs:"3",className:"d-flex justify-content-end"},i.a.createElement(E.a,{color:"success",size:"md",tag:b.b,to:"".concat(n,"/add")},"Add"))),i.a.createElement(d.a,null,i.a.createElement(p.a,{xs:"12"},i.a.createElement("p",{className:"text-danger"},"Note: Past events that have expired will automatically be removed, points will be retained."))),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,{xs:"12"},i.a.createElement(g.a,{for:"filterSelect"},"Filter"),i.a.createElement(v.a,{type:"select",name:"filterSelect",id:"filterSelect",onChange:this.filter},i.a.createElement("option",{value:"ALL"},"ALL"),t.map((function(e){return i.a.createElement("option",{key:e,value:a[e].name},a[e].name)}))))),i.a.createElement(d.a,null,i.a.createElement(N,{events:o,path:n})),i.a.createElement(d.a,{className:"justify-content-center align-items-center"},i.a.createElement(x,{rowsPerPage:r,currentPage:s,setPage:this.setPage,totalPosts:m.length}))))}}]),t}(o.PureComponent),M=Object(f.b)((function(e){return{ids:e.events.get("ids"),events:e.events.get("events"),pointIds:e.points.get("ids"),points:e.points.get("points")}}))(S),C=a(98),A=a(3),D=a.n(A),w=a(307),I=a(300),Y=a(301),T=a(273),R=a(67),Q=a.n(R),_=a(280),z=a(284),B=a(302),L=function(e){return Q()(e,"DDMMYY",!0).isValid()},G=function(e){var t=e.points,a=void 0===t?{}:t,n=e.pointIds,l=void 0===n?[]:n,r=e.pointSystem,s=void 0===r?"":r,c=e.date,o=void 0===c?"":c,m=e.name,u=void 0===m?"":m,E=e.pointAllocation,h=void 0===E?1:E,f=e.handleChange,b=e.isAdding,y=void 0!==b&&b;return i.a.createElement(_.a,null,i.a.createElement(d.a,null,i.a.createElement(p.a,null,i.a.createElement(z.a,null,i.a.createElement(g.a,{for:"Name"},"Name"),i.a.createElement(v.a,{type:"text",name:"name",id:"Name",placeholder:"Name of the event",onChange:f,invalid:""===u,value:u,disabled:y})),i.a.createElement(z.a,null,i.a.createElement(g.a,{for:"PointSystem"},"Point System"),i.a.createElement(v.a,{type:"select",name:"pointSystem",id:"PointSystem",value:s,onChange:f,invalid:""===s,disabled:y},l.map((function(e){return i.a.createElement("option",{key:e,value:e},a[e].name)})))),i.a.createElement(z.a,null,i.a.createElement(g.a,{for:"Date"},"Date"),i.a.createElement(v.a,{type:"text",name:"date",id:"Date",placeholder:"e.g. ".concat(Q()().tz("Asia/Singapore").format("DDMMYY")),invalid:!L(o),onChange:f,value:o,disabled:y}),i.a.createElement(B.a,{color:"muted"},"Must be in DDMMYY format, it will automatically convert to DD-MM-YYYY during submission")),i.a.createElement(z.a,null,i.a.createElement(g.a,{for:"PointAllocation"},"Point Allocation"),i.a.createElement(v.a,{type:"number",name:"pointAllocation",id:"PointAllocation",onChange:f,invalid:h<1,value:h,disabled:y}),i.a.createElement(B.a,{color:"muted"},"Min of 1 is needed to create event")))))},F=a(97),V=a(317),W=a(304),H=a(305),J=a(306),U=function(e){var t=e.ranks,a=e.rankIds,n=e.platoons,l=e.platoonIds,r=e.statuses,s=e.statusIds,c=e.handleSubmit,m=e.date,u=Object(o.useState)(!1),h=Object(F.a)(u,2),f=h[0],b=h[1],y=Object(o.useState)(1),N=Object(F.a)(y,2),j=N[0],k=N[1],O=Object(o.useState)(0),x=Object(F.a)(O,2),P=x[0],S=x[1],M=Object(o.useState)([]),C=Object(F.a)(M,2),A=C[0],D=C[1],w=Object(o.useState)([]),I=Object(F.a)(w,2),Y=I[0],T=I[1],R=Object(o.useState)(!1),_=Object(F.a)(R,2),B=_[0],L=_[1],G=Object(o.useState)([]),U=Object(F.a)(G,2),q=U[0],K=U[1],X=Object(o.useState)([]),Z=Object(F.a)(X,2),$=Z[0],ee=Z[1],te=function(){b(!f)};return i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(V.a,{isOpen:f,toggle:te},i.a.createElement(W.a,{toggle:te},"Generate"),i.a.createElement(H.a,null,""===m&&i.a.createElement(d.a,null,i.a.createElement(p.a,null,i.a.createElement("p",{className:"text-danger"},"Please assign a date before using this form"))),i.a.createElement(d.a,null,i.a.createElement(p.a,null,i.a.createElement(z.a,null,i.a.createElement(g.a,{for:"PioneersQty"},"Pioneers Qty"),i.a.createElement(v.a,{type:"number",name:"pioneersQty",id:"PioneersQty",value:j,onChange:function(e){return k(e.target.value)}})),i.a.createElement(z.a,null,i.a.createElement(g.a,{for:"WSQty"},"WSpec Qty"),i.a.createElement(v.a,{type:"number",name:"WSQty",id:"WSQty",value:P,onChange:function(e){return S(e.target.value)}})),i.a.createElement(z.a,null,i.a.createElement(g.a,{for:"selectPlatoons"},"Platoons"),i.a.createElement(v.a,{type:"select",name:"selectPlatoons",id:"selectPlatoons",multiple:!0,value:Y,onChange:function(e){for(var t=e.target.options,a=[],n=0,l=t.length;n<l;n+=1)t[n].selected&&a.push(t[n].value);T(a)}},l.map((function(e){var t=n[e];return i.a.createElement("option",{value:e,key:e},t.name)}))),i.a.createElement(z.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(v.a,{type:"checkbox",onChange:function(e){e.target.checked?T(l):T([])},checked:Y.length===l.length})," ","All Platoons"))),i.a.createElement(z.a,null,i.a.createElement(g.a,{for:"selectRanks"},"Ranks"),i.a.createElement(v.a,{type:"select",name:"selectRanks",id:"selectRanks",multiple:!0,value:A,onChange:function(e){for(var t=e.target.options,a=[],n=0,l=t.length;n<l;n+=1)t[n].selected&&a.push(t[n].value);D(a)}},a.map((function(e){var a=t[e];return i.a.createElement("option",{value:e,key:e},a.name)}))),i.a.createElement(z.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(v.a,{type:"checkbox",onChange:function(e){e.target.checked?D(a):D([])},checked:A.length===a.length})," ","All Ranks"))),i.a.createElement(z.a,null,i.a.createElement(g.a,{for:"selectStatuses"},"Statuses not allowed"),i.a.createElement(v.a,{type:"select",name:"selectStatuses",id:"selectStatuses",multiple:!0,value:q,onChange:function(e){for(var t=e.target.options,a=[],n=0,l=t.length;n<l;n+=1)t[n].selected&&a.push(t[n].value);K(a),a.length>0&&B&&L(!1)}},s.map((function(e){var t=r[e];return i.a.createElement("option",{value:e,key:e},t.name)})))),i.a.createElement(z.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(v.a,{type:"checkbox",onChange:function(e){e.target.checked?(ee(q),K(s),L(!1)):(K($),ee([]))},checked:q.length===s.length})," ","Exclude All Status")),i.a.createElement(z.a,{check:!0},i.a.createElement(g.a,{check:!0},i.a.createElement(v.a,{type:"checkbox",onChange:function(e){e.target.checked?(ee(q),K([]),L(!0)):(K($),ee([]),L(!1))},checked:B})," ","Statuses Only"))))),i.a.createElement(J.a,null,i.a.createElement(E.a,{color:"success",onClick:function(){var e={pQty:j,wsQty:P,ranks:A,platoons:Y};B?e.onlyStatus=!0:e.statuses=q,c(e),te()},disabled:0===j&&0===P||0===Y.length||0===A.length||""===m||!function(e){return Q()(e,"DDMMYY",!0).isValid()}(m)},"Generate")," ",i.a.createElement(E.a,{color:"secondary",onClick:te},"Cancel"))),i.a.createElement(E.a,{color:"primary",onClick:te},"Generate Personnels")))},q=a(61),K=a(57),X=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).handleGenerateForm=function(e){var t,n,l,r,s,c,o,i,m,u,d,p,E,g,v;return D.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.pQty,n=e.wsQty,l=e.statuses,r=void 0===l?[]:l,s=e.onlyStatus,c=void 0!==s&&s,o=e.ranks,i=e.platoons,a.setState({generatingNames:!0,selectedPersonnels:[],generationErrors:[]}),m=a.state,u=m.date,d=m.pointSystem,p={date:Q()(u,"DDMMYY",!0).format("DD-MM-YYYY"),pointSystemId:d,ranks:o,platoons:i},t>0&&(p.pioneers=t),n>0&&(p.wspecs=n),r.length>0&&!c&&(p.statusNotAllowed=r),c&&0===r.length&&(p.onlyStatus=!0),h.prev=8,h.next=11,D.a.awrap(K.a.generateName(p));case 11:(E=h.sent).ok?(g=E.data.map((function(e){return e._id})),a.setState({selectedPersonnels:g,generatingNames:!1})):401===E.status?a.setState({authenticated:!1,generatingNames:!1}):(v=[],E.data.message&&v.push(E.data.message),E.data.errors&&(v=v.concat(E.data.errors)),a.setState({generationErrors:v,generatingNames:!1})),h.next=18;break;case 15:h.prev=15,h.t0=h.catch(8),a.setState({generationErrors:[h.t0.message],generatingNames:!1});case 18:case"end":return h.stop()}}),null,null,[[8,15]])},a.handleSubmit=function(){var e=a.state,t=e.name,n=e.date,l=e.pointSystem,r=e.pointAllocation,s=e.selectedPersonnels;(0,a.props.addEvent)({name:t,date:Q()(n,"DDMMYY",!0).format("DD-MM-YYYY"),pointSystemId:l,pointAllocation:r,personnels:s})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(C.a)({},n,l))},a.renderGenerationErrors=function(){var e=a.state.generationErrors;return e.length<=0?null:i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(w.a,{color:"danger"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a.renderErrors=function(){var e=a.props.errors;return e.length<=0?null:i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(w.a,{color:"danger"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a.checkValidForm=function(){var e=a.state,t=e.name,n=e.pointSystem,l=e.date,r=e.selectedPersonnels,s=e.pointAllocation;return""!==t&&""!==n&&""!==l&&(!(r.length<=0)&&(!(s<=0)&&!!Q()(l,"DDMMYY",!0).isValid()))},a.state={pointSystem:"",date:"",name:"",selectedPersonnels:[],pointAllocation:1,authenticated:!0,generationErrors:[],generatingNames:!1,redirectToEvents:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.pointIds,a=e.points;t.length>0&&this.setState({pointSystem:a[t[0]]._id})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.isAdding,n=t.errors;e.isAdding&&!a&&n.length<=0&&this.setState({redirectToEvents:!0})}},{key:"render",value:function(){var e=this.props,t=e.pointIds,a=e.points,n=e.personnels,l=e.rankIds,r=e.ranks,s=e.platoonIds,c=e.platoons,o=e.statusIds,g=e.statuses,v=e.isAdding,h=this.state,f=h.pointSystem,y=h.date,N=h.name,j=h.selectedPersonnels,k=h.pointAllocation,O=h.authenticated,x=h.generatingNames,S=h.redirectToEvents;if(!O)return i.a.createElement(m.a,{to:"/login"});if(S)return i.a.createElement(m.a,{to:"/events"});var M=this.renderGenerationErrors(),C=this.renderErrors();return i.a.createElement(P.a,null,i.a.createElement(u.a,{className:"mb-2"},i.a.createElement(d.a,{className:"mt-2"},i.a.createElement(p.a,null,i.a.createElement(I.a,{tag:"nav"},i.a.createElement(Y.a,{tag:b.b,to:"/events"},"Events"),i.a.createElement(Y.a,{active:!0,tag:"span"},"Add")))),M,C,i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement("h1",null,"Add new event"))),i.a.createElement(G,{pointIds:t,points:a,pointSystem:f,date:y,handleChange:this.handleChange,name:N,pointAllocation:k,isAdding:v}),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex justify-content-start align-items-center"},i.a.createElement("p",{className:"font-weight-bold"},"Total Selected: ",j.length)),i.a.createElement(p.a,{className:"d-flex justify-content-end align-items-center"},i.a.createElement(U,{platoonIds:s,platoons:c,rankIds:l,ranks:r,statusIds:o,statuses:g,handleSubmit:this.handleGenerateForm,date:y}))),x&&i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex justify-content-center align-items-center flex-column"},i.a.createElement(T.a,{color:"primary"}),i.a.createElement("p",null,"Generating names..."))),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,{className:"overflow-auto",style:{maxHeight:"150px"}},j.map((function(e){var t=n[e];return i.a.createElement(d.a,{key:e},i.a.createElement(p.a,null,i.a.createElement("p",null,t.platoon.name," ",t.rank.name," ",t.name)))})))),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"text-center"},v?i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{color:"primary"}),i.a.createElement("p",null,"Adding...")):i.a.createElement(E.a,{size:"lg",className:"w-100",color:"success",disabled:!this.checkValidForm(),onClick:this.handleSubmit},"Create")))))}}]),t}(o.PureComponent),Z={addEvent:q.a},$=Object(f.b)((function(e){return{points:e.points.get("points"),pointIds:e.points.get("ids"),personnelIds:e.personnels.get("ids"),personnels:e.personnels.get("personnels"),rankIds:e.ranks.get("ids"),ranks:e.ranks.get("ranks"),platoonIds:e.platoons.get("ids"),platoons:e.platoons.get("platoons"),statusIds:e.statuses.get("ids"),statuses:e.statuses.get("statuses"),errors:e.pages.events.add.get("errors"),isAdding:e.pages.events.add.get("isAdding")}}),Z)(X),ee=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.events,a=e.personnels,n=t[e.match.params.eventId];return i.a.createElement(P.a,null,i.a.createElement(u.a,null,i.a.createElement(h.Helmet,null,i.a.createElement("title",null,"Event - Details")),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(I.a,{tag:"nav"},i.a.createElement(Y.a,{tag:b.b,to:"/events"},"Events"),i.a.createElement(Y.a,{active:!0,tag:"span"},"Details"),i.a.createElement(Y.a,{active:!0,tag:"span"},n.name)))),i.a.createElement(d.a,{className:"my-2 justify-content-center align-items-center"},i.a.createElement(p.a,{xs:"9"},i.a.createElement("h1",null,"Details")),i.a.createElement(p.a,{xs:"3",className:"d-flex justify-content-end"},i.a.createElement(E.a,{size:"md",color:"danger",tag:b.b,to:"/events/".concat(n._id,"/delete")},"Delete"))),i.a.createElement(d.a,null,i.a.createElement(y.a,{responsive:!0,striped:!0},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Name"),i.a.createElement("td",{className:"text-center"},n.name)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Date"),i.a.createElement("td",{className:"text-center"},n.date)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Point System"),i.a.createElement("td",{className:"text-center"},n.pointSystem.name)),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Points Allocation"),i.a.createElement("td",{className:"text-center"},n.pointsAllocation))))),i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement("h3",null,"Personnels"))),i.a.createElement(d.a,null,i.a.createElement(y.a,{responsive:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Platoon"),i.a.createElement("th",{className:"text-center"},"Rank"),i.a.createElement("th",{className:"text-center"},"Name"))),i.a.createElement("tbody",null,n.personnels.map((function(e){var t=a[e._id];return i.a.createElement("tr",{key:t._id},i.a.createElement("td",{className:"text-center"},t.platoon.name),i.a.createElement("td",{className:"text-center"},t.rank.name),i.a.createElement("td",{className:"text-center"},t.name))})))))))}}]),t}(o.PureComponent),te=Object(f.b)((function(e){return{events:e.events.get("events"),personnels:e.personnels.get("personnels")}}))(ee),ae=a(282),ne=a(291),le=a(293),re=a(60),se=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).handleRevert=function(e){var t=e.target.checked;a.setState({revert:t})},a.goBack=function(){(0,a.props.history.goBack)()},a.handleDelete=function(){var e=a.props,t=e.events,n=e.match.params.eventId,l=e.deleteEvent,r=a.state.revert;l({eventId:t[n]._id,revert:r})},a.getActionButtons=function(){return a.props.isDeleting?i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"text-center"},i.a.createElement(T.a,{size:"lg",color:"primary"}),i.a.createElement("p",null,"Deleting..."))):i.a.createElement(d.a,null,i.a.createElement(p.a,{xs:"6"},i.a.createElement(E.a,{color:"primary",size:"lg",className:"w-100",onClick:a.goBack},"Cancel")),i.a.createElement(p.a,{xs:"6"},i.a.createElement(E.a,{color:"danger",size:"lg",className:"w-100",onClick:a.handleDelete},"Confirm Delete")))},a.getAlertMessage=function(){return a.state.revert?i.a.createElement(w.a,{color:"danger"},"Removing this event will deduct points from personnels"):i.a.createElement(w.a,{color:"success"},"Removing this event will not deduct points")},a.getErrors=function(){var e=a.props.errors;return 0===e.length?null:i.a.createElement(d.a,{className:"my-2"},i.a.createElement(p.a,null,i.a.createElement(w.a,{color:"danger"},e.map((function(e){return i.a.createElement("p",{key:e},e)})))))},a.state={revert:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.events,a=e.match.params.eventId,n=e.isDeleting,l=this.state.revert,r=t[a]||null;if(!r)return i.a.createElement(m.a,{to:"/events"});var s=this.getErrors(),c=this.getAlertMessage(),o=this.getActionButtons();return i.a.createElement(P.a,null,i.a.createElement(u.a,null,s,i.a.createElement(d.a,{className:"mt-2"},i.a.createElement(p.a,null,i.a.createElement("h3",{className:"text-danger"},"Deleting event is irreversible!"))),i.a.createElement(d.a,{className:"my-2 mx-1"},i.a.createElement(ae.a,{body:!0},i.a.createElement(ne.a,{className:"text-center"},i.a.createElement("p",{className:"font-weight-bold"},"Deleting")),i.a.createElement(le.a,null,"Name: ",r.name),i.a.createElement(le.a,null,"Point System: ",r.pointSystem.name),i.a.createElement(le.a,null,"Points: ",r.pointsAllocation))),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex align-items-center justify-content-center"},i.a.createElement(z.a,{check:!0},i.a.createElement(v.a,{type:"checkbox",id:"revertCheckBox",checked:l,onChange:this.handleRevert,disabled:n}),i.a.createElement(g.a,{for:"revertCheckBox"},"Revert Points")))),i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"d-flex align-items-center justify-content-center"},l&&i.a.createElement("p",{className:"font-weight-bold"},"Total Affected Personnels: ",r.personnels.length))),i.a.createElement(d.a,null,i.a.createElement(p.a,null,c)),o))}}]),t}(o.PureComponent),ce={deleteEvent:re.a},oe=Object(f.b)((function(e){return{events:e.events.get("events"),isDeleting:e.pages.events.delete.get("isDeleting"),errors:e.pages.events.delete.get("errors")}}),ce)(se),ie=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.match.path;return i.a.createElement(m.d,null,i.a.createElement(m.b,{exact:!0,path:e,component:M}),i.a.createElement(m.b,{exact:!0,path:"".concat(e,"/add"),component:$}),i.a.createElement(m.b,{exact:!0,path:"".concat(e,"/:eventId/delete"),component:oe}),i.a.createElement(m.b,{exact:!0,path:"".concat(e,"/:eventId"),component:te}))}}]),t}(o.PureComponent);a.d(t,"default",(function(){return ie}))}}]);
//# sourceMappingURL=5.b95295e1.chunk.js.map